<!DOCTYPE html>












  


<html class="theme-next gemini use-motion" lang>
<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">























  
  
  
  

  
    
    
  

  
    
      
    

    
  

  
    
      
    

    
  

  

  

  
    
    
    <link rel="stylesheet" href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic|Roboto Slab:300,300italic,400,400italic,700,700italic|Noto Sans TC:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext">
  






<link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2">

<link rel="stylesheet" href="/css/main.css?v=7.0.1">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=7.0.1">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=7.0.1">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=7.0.1">


  <link rel="mask-icon" href="/images/logo.svg?v=7.0.1" color="#222">







<script id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Gemini',
    version: '7.0.1',
    sidebar: {"position":"right","display":"post","offset":15,"onmobile":false,"dimmer":false},
    back2top: true,
    back2top_sidebar: false,
    fancybox: false,
    fastclick: false,
    lazyload: false,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>


  




  <meta name="description" content="紀錄我的程式學習">
<meta property="og:type" content="website">
<meta property="og:title" content="Coding Road">
<meta property="og:url" content="https://nicknick0630.github.io/index.html">
<meta property="og:site_name" content="Coding Road">
<meta property="og:description" content="紀錄我的程式學習">
<meta property="og:locale" content="default">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Coding Road">
<meta name="twitter:description" content="紀錄我的程式學習">






  <link rel="canonical" href="https://nicknick0630.github.io/">



<script id="page.configurations">
  CONFIG.page = {
    sidebar: "",
  };
</script>

  <title>Coding Road</title>
  












  <noscript>
  <style>
  .use-motion .motion-element,
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-title { opacity: initial; }

  .use-motion .logo,
  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="default">

  
  
    
  

  <div class="container sidebar-position-right 
  page-home">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Coding Road</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
    
    
  </div>

  <div class="site-nav-toggle">
    <button aria-label="Toggle navigation bar">
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>



<nav class="site-nav">
  
    <ul id="menu" class="menu">
      
        
        
        
          
          <li class="menu-item menu-item-home menu-item-active">

    
    
    
      
    

    

    <a href="/" rel="section"><i class="menu-item-icon fa fa-fw fa-home"></i> <br>Home</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-目錄">

    
    
    
      
    

    

    <a href="/Index/" rel="section"><i class="menu-item-icon fa fa-fw fa-book"></i> <br>目錄</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-tags">

    
    
    
      
    

    

    <a href="/tags/" rel="section"><i class="menu-item-icon fa fa-fw fa-tags"></i> <br>Tags</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-categories">

    
    
    
      
    

    

    <a href="/categories/" rel="section"><i class="menu-item-icon fa fa-fw fa-th"></i> <br>Categories</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-archives">

    
    
    
      
    

    

    <a href="/archives/" rel="section"><i class="menu-item-icon fa fa-fw fa-archive"></i> <br>Archives</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-about">

    
    
    
      
    

    

    <a href="/about/" rel="section"><i class="menu-item-icon fa fa-fw fa-user"></i> <br>About</a>

  </li>

      
      
    </ul>
  

  

  
</nav>



  



</div>
    </header>

    


    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          
            

          
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://nicknick0630.github.io/2019/03/09/獲取-UVa-測資-Get-UVa-test-data/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Chen Yu Sheng">
      <meta itemprop="description" content="紀錄我的程式學習">
      <meta itemprop="image" content="/upload/image/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Coding Road">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2019/03/09/獲取-UVa-測資-Get-UVa-test-data/" class="post-title-link" itemprop="url">獲取 UVa 測資 ( Get UVa test data )</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              

              
                
              

              <time title="Created: 2019-03-09 15:15:30" itemprop="dateCreated datePublished" datetime="2019-03-09T15:15:30+08:00">2019-03-09</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Edited on</span>
                
                <time title="Modified: 2019-03-10 12:48:02" itemprop="dateModified" datetime="2019-03-10T12:48:02+08:00">2019-03-10</time>
              
            
          </span>

          

          
            
            
              
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
            
                <span class="post-meta-item-text">Comments: </span>
                <a href="/2019/03/09/獲取-UVa-測資-Get-UVa-test-data/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2019/03/09/獲取-UVa-測資-Get-UVa-test-data/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="聲明"><a href="#聲明" class="headerlink" title="聲明"></a>聲明</h2><p><strong>注意!!! 因為我也不知道這樣是不是 UVa 允許的，<font size="5">所以本人只有教學，不負任何責任，請自行拿捏</font></strong></p>
<h2 id="介紹"><a href="#介紹" class="headerlink" title="介紹"></a>介紹</h2><p>有時候我在寫 UVa 題目的時候，明明題目給的測資與 UDebug 上的測資都過了，但 submit 之後卻都還是 Wrong Answer<br>於是乎我就一直很想把 UVa 的測資搞到手XD ，左思右想就想到了幾種方法 :</p>
<ol>
<li><p>用遠端 ssh 連線。此方法的過程大略如下 :</p>
<ul>
<li>先將 UVa input 讀進程式</li>
<li>再將 input 存成一個 file</li>
<li>建立與自己電腦的 ssh 連線</li>
<li>將檔案上傳到自己電腦</li>
<li>關閉連線</li>
</ul>
<p>不過這個方法些問題就是 :</p>
<ul>
<li>UVa 的測試環境可能沒有權限讓我建立一個檔案</li>
<li>由於需要 create file，所以怕會讓程式 TLE，這樣可能還沒把檔案傳出去就先被終止掉了</li>
</ul>
</li>
<li><p>用 email 傳。方法過程如下 :</p>
<ul>
<li>先將 UVa input 讀進程式</li>
<li>準備 email 的 data</li>
<li>將 email 傳出</li>
<li>結束程式</li>
</ul>
<p>此方法也有一個問題 :<br>因為要傳 email 你就必須先登入，之後才可以傳，所以你的 email 帳號密碼會需要記錄在你的 program source file 中<br>可能會造成你的資料外洩，因此你需要準備一個不重要的 email 帳號。<br>當然可能也有不須登入就可以傳 email 的方法，只是我不知道QQ，有知道的大大拜託請你告訴我，感恩~~</p>
</li>
</ol>
<p>本文使用方法二，用 email 傳測資出來，不過成功機率並非 100%，下面會說明</p>
<p><br></p>
<h2 id="用-eamil-將獲取的-UVA-Data-傳出"><a href="#用-eamil-將獲取的-UVA-Data-傳出" class="headerlink" title="用 eamil 將獲取的 UVA Data 傳出"></a>用 eamil 將獲取的 UVA Data 傳出</h2><p>首先，先來準備我們要 submit 的程式碼，這邊是用 python 寫的</p>
<p><strong>crawing_data.py</strong><br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#! Note that you shold open the "Let less secure apps access your account" from the following URL</span></span><br><span class="line"><span class="comment">#! https://www.google.com/settings/security/lesssecureapps</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> smtplib</span><br><span class="line"><span class="keyword">import</span> sys</span><br><span class="line"><span class="keyword">from</span> smtplib <span class="keyword">import</span> SMTP</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">From = <span class="string">'@gmail.com'</span>     <span class="comment"># Your gmail account for sending email</span></span><br><span class="line">Password = <span class="string">''</span>           <span class="comment"># Your gmail account password</span></span><br><span class="line">To = <span class="string">''</span>                 <span class="comment"># The e-mail address you want to send grabing data to</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">line = sys.stdin.read()</span><br><span class="line"></span><br><span class="line">smtp_server = <span class="string">'smtp.gmail.com'</span></span><br><span class="line">smtp_port = <span class="number">587</span></span><br><span class="line"></span><br><span class="line">smtpObj = smtplib.SMTP(smtp_server, smtp_port)</span><br><span class="line">smtpObj.starttls()</span><br><span class="line">smtpObj.login(From,Password)</span><br><span class="line">to = [To]</span><br><span class="line">msg = line</span><br><span class="line"></span><br><span class="line">smtpObj.sendmail(From, to, msg)</span><br><span class="line">smtpObj.quit()</span><br></pre></td></tr></table></figure></p>
<p>注意其中的 <code>From</code>、<code>Password</code>和<code>To</code>分別要填上<code>你要登入的帳號</code>、<code>你登入帳號的密碼</code>與<code>你要寄到的信箱</code><br>要注意的是，<strong>py 檔名不要取名叫 “ email.py “，這樣會讓 python 找不到 smtplib，所以最好是取和 email 無關的名子</strong></p>
<p><img src="./py.PNG" style="width: 800px; height: 600px"></p>
<p>然後我們在 py 檔的目錄下創建一個 txt 檔，裡面可以打上任意的東西</p>
<p><img src="./txt.PNG" style="width: 800px; height: 600px"></p>
<p>然後我們再到 <b> <a href="https://myaccount.google.com/lesssecureapps" target="_blank" rel="noopener">低安全性應用程式存取權 (Less secure app access)</a> </b>頁面打開允許低安全應用存取</p>
<p><img src="./less.PNG" style="width: 800px; height: 600px"></p>
<p>我們現在就來測試一下，Windows 就開啟 CMD 並把目錄轉移到 py 檔所在的地方，Linux 則是用 terminal<br>並利用 pipe 來模擬 UVa 輸入測資 <code>python crawling_data.py &lt; input.txt</code></p>
<p><img src="./test1.PNG" style="width: 600px; height: 350px"></p>
<p>然後我們打開 email 來看一下</p>
<p><img src="./email.PNG" style="width: 800px; height: 600px"></p>
<p>耶收到了~</p>
<p><br></p>
<h2 id="重頭戲"><a href="#重頭戲" class="headerlink" title="重頭戲"></a>重頭戲</h2><p>我們現在選擇一個 UVa 題目，我這邊選 <a href="https://uva.onlinejudge.org/index.php?option=com_onlinejudge&amp;Itemid=8&amp;page=show_problem&amp;problem=1095" target="_blank" rel="noopener"><strong>UVa 10154 : Weights and Measures</strong></a></p>
<p>選擇使用 python，將剛剛的 crawling_data.py 貼上去</p>
<p><img src="./submit.PNG" style="width: 800px; height: 600px"></p>
<p>然後再來就是等待啦~~<br>因為 python 在 UVa Judge System 中的 priority 好像很低，所以普遍都要等很久</p>
<p>燈愣~~ 收到啦 ~~</p>
<p><img src="./nas.PNG" style="width: 800px; height: 600px"></p>
<p><br></p>
<h2 id="其他"><a href="#其他" class="headerlink" title="其他"></a>其他</h2><p>還有一個要注意的點就是，因為這個帳號是我為了寫文章特地辦的，可能比較新吧<br>不然我用我舊有的帳號去做的時候，program 在登入我的 email 時會失敗<br>google 他會跳一個 <code>剛剛有未知裝置要登入</code> blabla 之類的，然後他顯示在法國 … (意外收穫 UVa 總機在法國?!)<br>這個時候記得就要選是你本人，然後就一直試，也可以把 <strong>低安全性應用程式存取權</strong> 關掉試著 submit 一次<br>然後再打開 submit 一次，我那時候就是這樣用好的XD</p>
<p>然後你也可以試試其他不會這麼 <strong>安全</strong> 的 emaiil，可能 yahoo 等等<br>那要記得 py 檔裡面的 <code>smtp_server</code> 和 <code>smtp_port</code> 要記得更改<br>可以去找一下該 email 的 smpt 如何設定</p>
<p>最後最後<br><strong><font size="5">所以本人只有教學，不負任何責任，請自行拿捏，低調服用</font></strong></p>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://nicknick0630.github.io/2019/03/07/UVa-10154-Weights-and-Measures/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Chen Yu Sheng">
      <meta itemprop="description" content="紀錄我的程式學習">
      <meta itemprop="image" content="/upload/image/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Coding Road">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2019/03/07/UVa-10154-Weights-and-Measures/" class="post-title-link" itemprop="url">UVa 10154 : Weights and Measures</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              

              
                
              

              <time title="Created: 2019-03-07 21:46:28" itemprop="dateCreated datePublished" datetime="2019-03-07T21:46:28+08:00">2019-03-07</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Edited on</span>
                
                <time title="Modified: 2019-03-08 21:11:54" itemprop="dateModified" datetime="2019-03-08T21:11:54+08:00">2019-03-08</time>
              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/UVa/" itemprop="url" rel="index"><span itemprop="name">UVa</span></a></span>

                
                
              
            </span>
          

          
            
            
              
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
            
                <span class="post-meta-item-text">Comments: </span>
                <a href="/2019/03/07/UVa-10154-Weights-and-Measures/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2019/03/07/UVa-10154-Weights-and-Measures/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="題目-UVa-Link"><a href="#題目-UVa-Link" class="headerlink" title="題目 :  UVa Link "></a>題目 : <a href="https://uva.onlinejudge.org/index.php?option=com_onlinejudge&amp;Itemid=8&amp;page=show_problem&amp;problem=1095" target="_blank" rel="noopener"> <small><b>UVa Link</b></small> </a></h2><p>本題就是著名的烏龜塔題目 :<br>有 N 隻烏龜，第 i 隻重 W<sub>i</sub> 克且有 S<sub>i</sub> 的力量，代表他可以負載 S<sub>i</sub> - W<sub>i</sub> 的重量在背上<br>求由這 N 隻烏龜可以疊出的最大高度<br><br></p>
<p><strong>測資</strong><br><strong>Input : </strong></p>
<blockquote>
<p>300 1000<br>1000 1200<br>200 600<br>100 101</p>
</blockquote>
<p><strong>Output : </strong></p>
<blockquote>
<p>3</p>
</blockquote>
<p><br></p>
<h2 id="解法一-動態規劃-O-N2"><a href="#解法一-動態規劃-O-N2" class="headerlink" title="解法一 : 動態規劃 O( N2)"></a>解法一 : 動態規劃 O( N<sup>2</sup>)</h2><p>看著這個題目敘述想一下，發現跟 01 背包問題很像，就來分析一下</p>
<ul>
<li>有 N 個貨物  &lt;===&gt; 有 N 個烏龜</li>
<li>價值 V<sub>k</sub> &lt;===&gt; 重 W<sub>i</sub></li>
<li>重量 W<sub>k</sub> &lt;===&gt; 有 S<sub>i</sub> 的力量</li>
<li>最大容量為 V  &lt;===&gt; 最大高度為 H</li>
</ul>
<p>真的蠻相似的，再從想法上來看<br>01 背包是<strong>取與不取</strong>的問題，而烏龜塔也是<br>所以我們應該可以使用 01 背包問題的概念去解烏龜塔<br>只是烏龜塔多了一個條件限制 : 底層的烏龜要能夠負荷上面烏龜們的重量<br>因此我們選擇 suboptimal solution 時，就要去多檢查這項條件<br><br></p>
<p>我們還有一項要考慮的問題，那就是 :</p>
<blockquote>
<p>那由下往上蓋烏龜塔，還是由上往下蓋呢?</p>
</blockquote>
<ol>
<li>由下往上蓋<br> 思考一下這個過程，選了一隻力量夠大的烏龜當最下層，再選第二隻烏龜當第二層，然後檢查一下第一隻撐不撐得住，接下來再挑第三隻烏龜當地三層，同樣地再去檢查一下第一隻烏龜和第二隻烏龜會部會腿軟，挑了第 k 層烏龜後，要去檢查第 1 ~ k - 1 的是否能夠撐住各自的上層重量總和 ……<br> 呼~~感覺很麻煩呀~</li>
<li>由上往下蓋<br> 選一隻比較輕的烏龜當最上層，再選第二隻烏龜當第二層，檢查一下能不能隻撐得住第一隻烏龜，再挑第三隻烏龜出來，同樣地檢查能不能夠撐住上面烏龜重量的總和，挑了第 k 層烏龜，要去檢查此烏龜能不能撐住上面所有的重量 ……<br> 恩好像比較簡單了</li>
</ol>
<p>結論 : <strong>由上往下蓋</strong><br><br></p>
<p>此外，從剛剛的思考過程我們可以發現，越下層的烏龜需要的力量也越大，越上層的似乎越輕越好，那我們可以利用對烏龜排序來方便我們之後程式的進行，現在又面臨到一個問題了 :</p>
<blockquote>
<p>要依照力量排序呢，還是要依照重量排序呢?</p>
</blockquote>
<p>舉個例子來看看，我們先用重量排序 : </p>
<table>
<thead>
<tr>
<th>編號</th>
<th>1</th>
<th>2</th>
<th>3</th>
<th>4</th>
</tr>
</thead>
<tbody>
<tr>
<td>重量</td>
<td>10</td>
<td>20</td>
<td>20</td>
<td>140</td>
</tr>
<tr>
<td>力量</td>
<td>60</td>
<td>20</td>
<td>40</td>
<td>150</td>
</tr>
</tbody>
</table>
<p>因為我們是從上往下蓋，所以越上面要越輕，因此我們要從編號 1 開始取<br>最多可以疊到 2 層 ( 上到下 : 2 –&gt; 4 )</p>
<p>但是，若我們改用力量編號 :</p>
<table>
<thead>
<tr>
<th>編號</th>
<th>1</th>
<th>2</th>
<th>3</th>
<th>4</th>
</tr>
</thead>
<tbody>
<tr>
<td>重量</td>
<td>20</td>
<td>20</td>
<td>10</td>
<td>140</td>
</tr>
<tr>
<td>力量</td>
<td>20</td>
<td>40</td>
<td>60</td>
<td>150</td>
</tr>
</tbody>
</table>
<p>發現最多可以疊到 3 層 ( 上到下 : 1 –&gt; 2 –&gt; 3 )</p>
<p>因此可以知道用重量排序是不對的</p>
<p>那麼用力量排序呢?</p>
<p><strong>Proof : </strong></p>
<p>假設有一組正確答案高度為 m，由上到下所有重量與力量如下 :</p>
<p>重量 W<sub>1</sub>、W<sub>2</sub> … W<sub>m-1</sub>、W<sub>m</sub><br>力量 S<sub>1</sub>、S<sub>2</sub> … S<sub>m-1</sub>、S<sub>m</sub></p>
<p>考慮其中有一層 k，依照題意，他能夠支撐住自己與所有上層烏龜的重量 :</p>
<p>S<sub>k</sub> &gt;= W<sub>1</sub> + W<sub>2</sub> + … + W<sub>k-1</sub> + W<sub>k</sub> = Sum<sub>k</sub><br>(令 1 ~ k 層的重量為 Sum<sub>k</sub> )</p>
<p>假設他上一層 k-1 的力量比 k 大，也就是</p>
<p>S<sub>k-1</sub> &gt; S<sub>k</sub></p>
<p>得到 :</p>
<p>S<sub>k-1</sub> &gt; S<sub>k</sub> &gt;= Sum<sub>k</sub></p>
<p>若我們將第 k-1 層和第 k 層交換，也就是從原本的順序 :</p>
<p>1、2 … k-1 、 k … m</p>
<p>變成下面的順序 :</p>
<p>1、2 … k 、 k-1 … m</p>
<p>烏龜 k 現在需要承受的重量為 Sum<sub>k</sub> - W<sub>k-1</sub>，而烏龜 k-1 需要承受 Sum<sub>k</sub><br>由於烏龜 k 承受的重量減少了，所以可以承受住，又 S<sub>k-1</sub> &gt; S<sub>k</sub> &gt;= Sum<sub>k</sub><br>烏龜 k - 1 也可以承受得住此重量，所以我們就算對調這 2 層的烏龜也不會有任何問題，他們都可以抬的動上面的同胞們</p>
<p>因此，每當有相鄰的上層力量比下層大時，把這 2 層對調後一定不會有問題<br>反覆執行此動作後，我們必然可以將順序調整成烏龜塔由上到下的力量是越來越大的</p>
<p>所以我們用力量排序後在用 DP 去計算得出的答案就會是正確的</p>
<p><strong>證明完畢</strong><br><br></p>
<p>這樣我們就可以建構出轉移方程式 :<br><code>dp[i][k] = min{ dp[i-1][k] , dp[i][k - 1] + Wi }</code><br>其中，<code>dp[i][k - 1] + Wi</code>必須要<code>&lt;= Si</code> 才可以才用<br>dp[i][k] 的意思是<strong>從前 i 隻烏龜中，能夠由上往下建構出 k 層塔的最小重量</strong>，若不能的話，狀態則為 Invalid</p>
<h3 id="解法一程式碼"><a href="#解法一程式碼" class="headerlink" title="解法一程式碼"></a>解法一程式碼</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;queue&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	Solution()</span><br><span class="line">	&#123;</span><br><span class="line">		ios::sync_with_stdio(<span class="literal">false</span>);</span><br><span class="line">		<span class="built_in">cin</span>.tie(<span class="literal">nullptr</span>);</span><br><span class="line">		<span class="built_in">cout</span>.tie(<span class="literal">nullptr</span>);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">int</span> <span class="title">calculate</span><span class="params">(<span class="built_in">vector</span>&lt;pair&lt;<span class="keyword">int</span>, <span class="keyword">int</span>&gt;&gt; &amp;data)</span></span></span><br><span class="line"><span class="function">	</span>&#123;</span><br><span class="line">		<span class="keyword">const</span> <span class="keyword">int</span> INF = <span class="number">100000000</span>;</span><br><span class="line"></span><br><span class="line">		sort(data.begin(), data.end(), [](<span class="keyword">const</span> pair&lt;<span class="keyword">int</span>, <span class="keyword">int</span>&gt; &amp;lhs, <span class="keyword">const</span> pair&lt;<span class="keyword">int</span>, <span class="keyword">int</span>&gt; &amp;rhs) </span><br><span class="line">		&#123;</span><br><span class="line">			<span class="keyword">if</span> (lhs.second &lt; rhs.second)</span><br><span class="line">				<span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">			<span class="keyword">else</span> <span class="keyword">if</span> (lhs.second == rhs.second)</span><br><span class="line">				<span class="keyword">return</span> lhs.first &lt; rhs.first;</span><br><span class="line"></span><br><span class="line">			<span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">		&#125;);</span><br><span class="line"></span><br><span class="line">		<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; dp(data.size() + <span class="number">1</span>, INF);</span><br><span class="line"></span><br><span class="line">		dp[<span class="number">0</span>] = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">		<span class="keyword">int</span> i, k;</span><br><span class="line"></span><br><span class="line">		<span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; data.size(); ++i)</span><br><span class="line">			<span class="keyword">for</span> (k = dp.size() - <span class="number">1</span>; k &gt;= <span class="number">1</span>; --k)</span><br><span class="line">			&#123;</span><br><span class="line">				<span class="keyword">if</span> (dp[k - <span class="number">1</span>] + data[i].first &lt;= data[i].second)</span><br><span class="line">					dp[k] = min(dp[k], dp[k - <span class="number">1</span>] + data[i].first);</span><br><span class="line">			&#125;</span><br><span class="line"></span><br><span class="line">		<span class="keyword">for</span> (i = <span class="number">1</span>; i &lt; dp.size(); ++i)</span><br><span class="line">			<span class="keyword">if</span> (dp[i] == INF)</span><br><span class="line">				<span class="keyword">break</span>;</span><br><span class="line"></span><br><span class="line">		<span class="keyword">return</span> i - <span class="number">1</span>;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">void</span>)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	Solution s;</span><br><span class="line"></span><br><span class="line">	<span class="built_in">vector</span>&lt;pair&lt;<span class="keyword">int</span>, <span class="keyword">int</span>&gt;&gt; data;</span><br><span class="line"></span><br><span class="line">	data.reserve(<span class="number">5607</span>);</span><br><span class="line"></span><br><span class="line">	<span class="keyword">int</span> w, l;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">while</span> (<span class="built_in">cin</span> &gt;&gt; w)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="built_in">cin</span> &gt;&gt; l;</span><br><span class="line"></span><br><span class="line">		data.emplace_back(w, l);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">auto</span> ans = s.calculate(data);</span><br><span class="line"></span><br><span class="line">	<span class="built_in">cout</span> &lt;&lt; ans &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><br></p>
<h2 id="解法二-Moore-Hodgson’s-Algorithm-O-NlogN"><a href="#解法二-Moore-Hodgson’s-Algorithm-O-NlogN" class="headerlink" title="解法二 : Moore-Hodgson’s Algorithm O( NlogN )"></a>解法二 : Moore-Hodgson’s Algorithm O( NlogN )</h2><p>可以先參考<a href="https://nicknick0630.github.io/2019/03/07/Moore-Hodgson-s-Algorithm-Minimizing-the-number-of-late-jobs/"><strong>這篇</strong></a>了解一下 Moore-Hodgson’s Algorithm</p>
<p>我們再把問題轉換一下</p>
<ul>
<li>N 隻烏龜 &lt;==&gt; N 個 Job</li>
<li>重量 W<sub>i</sub> &lt;==&gt; 耗時 P<sub>k</sub></li>
<li>力量 S<sub>i</sub> &lt;==&gt; Due D<sub>i</sub></li>
<li>最高疊 H 層 &lt;==&gt; 最多有 M 個工作可以及時完成 ( 最少工作不能夠被完成的Schedule )</li>
</ul>
<p>咦????!!!! 一模模一樣樣耶!!!!<br>OK 那我們就直接用啦~</p>
<p><br></p>
<h3 id="演算法"><a href="#演算法" class="headerlink" title="演算法"></a>演算法</h3><ol>
<li>先依照力量將烏龜排序</li>
<li>遍歷烏龜們 T，將 T[i] 加入到 priority queue 中</li>
<li>將目前 total_sum 加上 T[i] 的重量</li>
<li>檢查此烏龜是否可以負荷上層與本身的重量 ( total_sum 是否大於 S[i] )</li>
<li>若超重，則從 priority queue 中去除最大者，將 total_sum 扣掉他。</li>
<li>重複步驟 2，直到遍歷完烏龜們</li>
<li>輸出 : 最後在 T 中尋找到最大的 k 值且 T[k] 是合法狀態，k 即為最大層數</li>
</ol>
<p>不過因為我們不需要輸出最後堆疊的結果，只需要知道最高層數就好<br>所以我們就可以簡化一下程式碼，Priority Queue 中只要記錄重量就好，也不需要去紀錄被丟棄的烏龜編號<br><br></p>
<h3 id="解法二程式碼"><a href="#解法二程式碼" class="headerlink" title="解法二程式碼"></a>解法二程式碼</h3><p>大部分都跟上面的程式碼一樣，只要把 calculate() 函式部分換掉就可以了</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">calculate</span><span class="params">(<span class="built_in">vector</span>&lt;pair&lt;<span class="keyword">int</span>, <span class="keyword">int</span>&gt;&gt; &amp;data)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	sort(data.begin(), data.end(), [](<span class="keyword">const</span> pair&lt;<span class="keyword">int</span>, <span class="keyword">int</span>&gt; &amp;lhs, <span class="keyword">const</span> pair&lt;<span class="keyword">int</span>, <span class="keyword">int</span>&gt; &amp;rhs)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="keyword">if</span> (lhs.second &lt; rhs.second)</span><br><span class="line">			<span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">		<span class="keyword">else</span> <span class="keyword">if</span> (lhs.second == rhs.second)</span><br><span class="line">			<span class="keyword">return</span> lhs.first &lt; rhs.first;</span><br><span class="line">		<span class="keyword">else</span></span><br><span class="line">			<span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">	&#125;);</span><br><span class="line"></span><br><span class="line">	priority_queue&lt;<span class="keyword">int</span>&gt; pq;</span><br><span class="line">	<span class="keyword">int</span> i, sum = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; data.size(); ++i)</span><br><span class="line">	&#123;</span><br><span class="line">		pq.push(data[i].first);</span><br><span class="line"></span><br><span class="line">		sum += data[i].first;</span><br><span class="line"></span><br><span class="line">		<span class="keyword">if</span> (sum &gt; data[i].second)</span><br><span class="line">		&#123;</span><br><span class="line">			sum -= pq.top();</span><br><span class="line">			pq.pop();</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">return</span> pq.size();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><br></p>
<hr>
<h2 id="UVa-真實測資"><a href="#UVa-真實測資" class="headerlink" title="UVa 真實測資"></a>UVa 真實測資</h2><p>以下我偷渡出來的 UVa 測資和我的程式 run 的解答，請低調享用</p>
<ol>
<li><a href="./UVa-10154-test-data.txt"> <strong>UVa 10154 Test Data</strong></a></li>
<li><a href="./ans.txt"><strong>My Ans</strong></a></li>
</ol>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://nicknick0630.github.io/2019/03/07/Moore-Hodgson-s-Algorithm-Minimizing-the-number-of-late-jobs/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Chen Yu Sheng">
      <meta itemprop="description" content="紀錄我的程式學習">
      <meta itemprop="image" content="/upload/image/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Coding Road">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2019/03/07/Moore-Hodgson-s-Algorithm-Minimizing-the-number-of-late-jobs/" class="post-title-link" itemprop="url">Moore-Hodgson's Algorithm</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              

              
                
              

              <time title="Created: 2019-03-07 00:06:01" itemprop="dateCreated datePublished" datetime="2019-03-07T00:06:01+08:00">2019-03-07</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Edited on</span>
                
                <time title="Modified: 2019-03-10 12:09:47" itemprop="dateModified" datetime="2019-03-10T12:09:47+08:00">2019-03-10</time>
              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/演算法-Algorithm/" itemprop="url" rel="index"><span itemprop="name">演算法 ( Algorithm )</span></a></span>

                
                
              
            </span>
          

          
            
            
              
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
            
                <span class="post-meta-item-text">Comments: </span>
                <a href="/2019/03/07/Moore-Hodgson-s-Algorithm-Minimizing-the-number-of-late-jobs/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2019/03/07/Moore-Hodgson-s-Algorithm-Minimizing-the-number-of-late-jobs/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <blockquote>
<p>此演算法將一個 O( N<sup>2</sup> ) 的 Scheduling 問題縮減到了 O( NlogN )</p>
</blockquote>
<p><br></p>
<h2 id="問題描述"><a href="#問題描述" class="headerlink" title="問題描述"></a>問題描述</h2><p>有 N 個 Jobs，每個 Job 耗時 p 且期限 (due) 為 d，求<strong>最少逾期工作數量 ( Minimum number of late jobs )</strong>的排程方式<br>也就是說，要找出一個排程方式是能夠讓在期限之前完成的工作數量最大化</p>
<p><br></p>
<h2 id="Moore-Hodgson-演算法"><a href="#Moore-Hodgson-演算法" class="headerlink" title="Moore-Hodgson 演算法"></a>Moore-Hodgson 演算法</h2><ol>
<li>設 J = ∅ ( J 是一個 subschedule 且為空集合 )</li>
<li>將 Jobs 按照期限遞增排序 ( d<sub>1</sub> &lt; d<sub>2</sub> &lt; …… &lt; d<sub>n</sub> )，也就是依照 Earliest Due Date ( EDD ) 的方式，並放入 J 中</li>
<li>令 k = subschedule J 中的第一個<strong>逾期</strong>工作的 index，如果沒有找到，代表已完成排程，跳到步驟 7</li>
<li>找出 p<sub>m</sub> = max{ p<sub>i</sub>, for i = 1 ~ k } ( <strong>找出 index &lt;= k 中最耗時的工作</strong>)</li>
<li>將 Job m 移出 subschedule J，放入集合 S 中</li>
<li>重複步驟 3</li>
<li>最後，將集合 S 以<strong>任意</strong>順序加到 J 的後面，此 Schedule J 即為最少逾期工作數量的排程</li>
</ol>
<p><br></p>
<h2 id="例子一"><a href="#例子一" class="headerlink" title="例子一"></a>例子一</h2><table>
<thead>
<tr>
<th>Job</th>
<th>1</th>
<th>2</th>
<th>3</th>
<th>4</th>
<th>5</th>
<th>6</th>
</tr>
</thead>
<tbody>
<tr>
<td>p<sub>i</sub> ( 所需時間 )</td>
<td>10</td>
<td>3</td>
<td>4</td>
<td>8</td>
<td>10</td>
<td>6</td>
</tr>
<tr>
<td>d<sub>i</sub> ( 期限 )</td>
<td>15</td>
<td>6</td>
<td>9</td>
<td>23</td>
<td>20</td>
<td>30</td>
</tr>
</tbody>
</table>
<p>第一步，先根據 Due Time 去做排序<br>再新增加一個 s<sub>i</sub> 去紀錄剛好執行完 Job[i] 的時間</p>
<table>
<thead>
<tr>
<th>Job</th>
<th>2</th>
<th>3</th>
<th>1</th>
<th>5</th>
<th>4</th>
<th>6</th>
</tr>
</thead>
<tbody>
<tr>
<td>p<sub>i</sub> ( 所需時間 )</td>
<td>3</td>
<td>4</td>
<td>10</td>
<td>10</td>
<td>8</td>
<td>6</td>
</tr>
<tr>
<td>d<sub>i</sub> ( 期限 )</td>
<td>6</td>
<td>9</td>
<td>15</td>
<td>20</td>
<td>23</td>
<td>30</td>
</tr>
<tr>
<td>s<sub>i</sub> ( 完成工作的時間 )</td>
<td>3</td>
<td>7</td>
<td>17</td>
<td>27</td>
<td>35</td>
<td>41</td>
</tr>
</tbody>
</table>
<p>我們可以輕易的從 s<sub>i</sub> 與 d<sub>i</sub> 去找到第一個逾期的工作是 Job[1]<br>然後再找一下在 Job[1] 之前的工作中，<strong>最耗時</strong>的工作為 Job[1]<br>所以我們把 Job[1] 刪除，並更新一下在 Job[1] 之後的 s<sub>i</sub></p>
<table>
<thead>
<tr>
<th>Job</th>
<th>2</th>
<th>3</th>
<th>5</th>
<th>4</th>
<th>6</th>
</tr>
</thead>
<tbody>
<tr>
<td>p<sub>i</sub></td>
<td>3</td>
<td>4</td>
<td>10</td>
<td>8</td>
<td>6</td>
</tr>
<tr>
<td>d<sub>i</sub></td>
<td>6</td>
<td>9</td>
<td>20</td>
<td>23</td>
<td>30</td>
</tr>
<tr>
<td>s<sub>i</sub></td>
<td>3</td>
<td>7</td>
<td>17</td>
<td>25</td>
<td>31</td>
</tr>
</tbody>
</table>
<p>找到第一個逾期的工作是 Job[4]<br>在 Job[4] 之前<strong>最耗時</strong>的工作為 Job[5]<br>剔除他並更新</p>
<table>
<thead>
<tr>
<th>Job</th>
<th>2</th>
<th>3</th>
<th>4</th>
<th>6</th>
</tr>
</thead>
<tbody>
<tr>
<td>p<sub>i</sub></td>
<td>3</td>
<td>4</td>
<td>8</td>
<td>6</td>
</tr>
<tr>
<td>d<sub>i</sub></td>
<td>6</td>
<td>9</td>
<td>23</td>
<td>30</td>
</tr>
<tr>
<td>s<sub>i</sub></td>
<td>3</td>
<td>7</td>
<td>15</td>
<td>21</td>
</tr>
</tbody>
</table>
<p>到這邊就沒有逾期的工作了<br>接下來就是把剛剛剔除的工作以<strong>任意順序</strong>加到後面去</p>
<p>所以可以為 : 2 -&gt; 3 -&gt; 4 -&gt; 6 -&gt; <strong>1 -&gt; 5</strong><br>也可以是為 : 2 -&gt; 3 -&gt; 4 -&gt; 6 -&gt; <strong>5 -&gt; 1</strong></p>
<h2 id="例子二"><a href="#例子二" class="headerlink" title="例子二"></a>例子二</h2><table>
<thead>
<tr>
<th>Job</th>
<th>1</th>
<th>2</th>
<th>3</th>
<th>4</th>
<th>5</th>
</tr>
</thead>
<tbody>
<tr>
<td>p<sub>i</sub></td>
<td>4</td>
<td>3</td>
<td>2</td>
<td>5</td>
<td>6</td>
</tr>
<tr>
<td>d<sub>i</sub></td>
<td>6</td>
<td>7</td>
<td>8</td>
<td>9</td>
<td>11</td>
</tr>
</tbody>
</table>
<p>由於剛好順序已經是按照 Due Time 排序過後的了<br>所以直接加上 s<sub>i</sub> 來輔助過程</p>
<table>
<thead>
<tr>
<th>Job</th>
<th>1</th>
<th>2</th>
<th>3</th>
<th>4</th>
<th>5</th>
</tr>
</thead>
<tbody>
<tr>
<td>p<sub>i</sub></td>
<td>4</td>
<td>3</td>
<td>2</td>
<td>5</td>
<td>6</td>
</tr>
<tr>
<td>d<sub>i</sub></td>
<td>6</td>
<td>7</td>
<td>8</td>
<td>9</td>
<td>11</td>
</tr>
<tr>
<td>s<sub>i</sub></td>
<td>4</td>
<td>7</td>
<td>9</td>
<td>14</td>
<td>20</td>
</tr>
</tbody>
</table>
<p>找到第一個逾期的工作是 Job[3]<br>在 Job[3] 之前<strong>最耗時</strong>的工作為 Job[1]<br>剔除他並更新</p>
<table>
<thead>
<tr>
<th>Job</th>
<th>2</th>
<th>3</th>
<th>4</th>
<th>5</th>
</tr>
</thead>
<tbody>
<tr>
<td>p<sub>i</sub></td>
<td>3</td>
<td>2</td>
<td>5</td>
<td>6</td>
</tr>
<tr>
<td>d<sub>i</sub></td>
<td>7</td>
<td>8</td>
<td>9</td>
<td>11</td>
</tr>
<tr>
<td>s<sub>i</sub></td>
<td>3</td>
<td>5</td>
<td>10</td>
<td>16</td>
</tr>
</tbody>
</table>
<p>找到第一個逾期的工作是 Job[4]<br>在 Job[4] 之前<strong>最耗時</strong>的工作為 Job[4]<br>剔除他並更新</p>
<table>
<thead>
<tr>
<th>Job</th>
<th>2</th>
<th>3</th>
<th>5</th>
</tr>
</thead>
<tbody>
<tr>
<td>p<sub>i</sub></td>
<td>3</td>
<td>2</td>
<td>6</td>
</tr>
<tr>
<td>d<sub>i</sub></td>
<td>7</td>
<td>8</td>
<td>11</td>
</tr>
<tr>
<td>s<sub>i</sub></td>
<td>3</td>
<td>5</td>
<td>11</td>
</tr>
</tbody>
</table>
<p>到這邊就沒有逾期的工作了<br>接下來就是把剛剛剔除的工作以<strong>任意順序</strong>加到後面去</p>
<p>所以可以為 : 2 -&gt; 3 -&gt; 5 -&gt; <strong>1 -&gt; 4</strong><br>也可以是為 : 2 -&gt; 3 -&gt; 5 -&gt; <strong>4 -&gt; 1</strong></p>
<p><br></p>
<h2 id="暴力程式碼-O-N2"><a href="#暴力程式碼-O-N2" class="headerlink" title="暴力程式碼 O( N2 )"></a>暴力程式碼 O( N<sup>2</sup> )</h2><blockquote>
<p>此版本程式碼耗時 O( N<sup>2</sup> )<br>他只是演示上述演算法的過程<br><strong>並非真正的最佳 present algorithm 的方式</strong><br>真正優化的程式碼請往下看或按側邊攔跳到 <strong> 優化程式碼 </strong></p>
</blockquote>
<p>首先我們先定義一下工作的結構與比較大小的方法</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Job</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">	<span class="keyword">int</span> index;</span><br><span class="line">	<span class="keyword">int</span> process;</span><br><span class="line">	<span class="keyword">int</span> due;</span><br><span class="line">	<span class="keyword">int</span> end_time;</span><br><span class="line"></span><br><span class="line">	Job(<span class="keyword">int</span> i = <span class="number">0</span>, <span class="keyword">int</span> p = <span class="number">0</span>, <span class="keyword">int</span> d = <span class="number">0</span>, <span class="keyword">int</span> e = <span class="number">0</span>) : index&#123; i &#125;, process &#123; p &#125;, due&#123; d &#125;, end_time&#123; e &#125; &#123;&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">inline</span> <span class="keyword">bool</span> <span class="keyword">operator</span>&lt;(<span class="keyword">const</span> Job &amp;lhs, <span class="keyword">const</span> Job &amp;rhs)</span><br><span class="line">&#123;</span><br><span class="line">	<span class="keyword">return</span> lhs.due &lt; rhs.due;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>再把 Moore-Hodgson’s Algorithm 封裝成 class</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Moore_Hodgson</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	Moore_Hodgson(<span class="built_in">initializer_list</span>&lt;Job&gt; int_list) : jobs&#123; int_list &#125;, last_valid_idx&#123; jobs.size() - <span class="number">1</span> &#125;</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="comment">// 初始化 Jobs</span></span><br><span class="line">		initial();</span><br><span class="line"></span><br><span class="line">		<span class="comment">// 運算</span></span><br><span class="line">		operate();</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">friend</span> ostream&amp; <span class="keyword">operator</span>&lt;&lt;(ostream &amp;out, <span class="keyword">const</span> Moore_Hodgson &amp;schedule)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="keyword">for</span> (<span class="keyword">auto</span> &amp;x : schedule.jobs)</span><br><span class="line">			out &lt;&lt; x.index &lt;&lt; <span class="string">" "</span>;</span><br><span class="line"></span><br><span class="line">		<span class="keyword">return</span> out;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">	<span class="built_in">vector</span>&lt;Job&gt; jobs;</span><br><span class="line">	<span class="keyword">unsigned</span> last_valid_idx;	<span class="comment">// 最後一個可以在期限內完成的工作的 Index</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">	<span class="function"><span class="keyword">void</span> <span class="title">operate</span><span class="params">(<span class="keyword">void</span>)</span></span></span><br><span class="line"><span class="function">	</span>&#123;</span><br><span class="line">		<span class="keyword">int</span> idx;</span><br><span class="line">		<span class="keyword">int</span> tem = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">		<span class="comment">// 若此次迴圈中沒有改變到 last_valid_idx 的值，代表已完成演算法</span></span><br><span class="line">		<span class="keyword">while</span> (tem != last_valid_idx)</span><br><span class="line">		&#123;</span><br><span class="line">			tem = last_valid_idx;</span><br><span class="line"></span><br><span class="line">			<span class="keyword">for</span> (idx = <span class="number">0</span>; idx &lt;= last_valid_idx; ++idx)</span><br><span class="line">			&#123;</span><br><span class="line">				<span class="comment">// 找到逾期的工作</span></span><br><span class="line">				<span class="keyword">if</span> (jobs[idx].end_time &gt; jobs[idx].due)</span><br><span class="line">				&#123;</span><br><span class="line">					<span class="comment">// 找出最大工作量的工作 J_max</span></span><br><span class="line">					<span class="keyword">auto</span> itr = find_max_processing_time(jobs, <span class="number">0</span>, idx);</span><br><span class="line"></span><br><span class="line">					<span class="comment">// 先記錄起來</span></span><br><span class="line">					<span class="keyword">auto</span> rec = *itr;</span><br><span class="line"></span><br><span class="line">					<span class="comment">// 移除最大工作量的工作 J_max</span></span><br><span class="line">					<span class="keyword">auto</span> new_itr = jobs.erase(itr);</span><br><span class="line"></span><br><span class="line">					<span class="comment">// 將 last_valid_idx 往前移一位</span></span><br><span class="line">					--last_valid_idx;</span><br><span class="line"></span><br><span class="line">					<span class="comment">// 把在被刪掉的 J_max 工作之後的工作的結束時間更新 ( 不包括已經確定逾期的工作 )</span></span><br><span class="line">					<span class="comment">// 且只需要將之後的每個工作都減掉 J_max 的工作量就可以</span></span><br><span class="line">					update_end_time(jobs, rec.process);</span><br><span class="line"></span><br><span class="line">					<span class="comment">// 將逾期的工作加到最後面放著</span></span><br><span class="line">					jobs.push_back(rec);</span><br><span class="line"></span><br><span class="line">					<span class="comment">// 跳出 for 迴圈</span></span><br><span class="line">					<span class="keyword">break</span>;</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">void</span> <span class="title">initial</span><span class="params">(<span class="keyword">void</span>)</span></span></span><br><span class="line"><span class="function">	</span>&#123;</span><br><span class="line">		sort(jobs.begin(), jobs.end());</span><br><span class="line"></span><br><span class="line">		jobs[<span class="number">0</span>].end_time = jobs[<span class="number">0</span>].process;</span><br><span class="line"></span><br><span class="line">		<span class="keyword">for</span> (<span class="keyword">auto</span> idx = <span class="number">1</span>; idx &lt; jobs.size(); ++idx)</span><br><span class="line">			jobs[idx].end_time = jobs[idx - <span class="number">1</span>].end_time + jobs[idx].process;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="built_in">vector</span>&lt;Job&gt;::<span class="function">const_iterator <span class="title">find_max_processing_time</span><span class="params">(<span class="keyword">const</span> <span class="built_in">vector</span>&lt;Job&gt; &amp;jobs, <span class="keyword">int</span> start, <span class="keyword">int</span> end)</span> <span class="keyword">const</span></span></span><br><span class="line"><span class="function">	</span>&#123;</span><br><span class="line">		<span class="keyword">int</span> max = <span class="number">-1</span>;</span><br><span class="line">		<span class="keyword">int</span> idx = <span class="number">-1</span>;</span><br><span class="line"></span><br><span class="line">		<span class="keyword">for</span> (<span class="keyword">int</span> i = start; i &lt;= end; ++i)</span><br><span class="line">			<span class="keyword">if</span> (jobs[i].process &gt; max)</span><br><span class="line">			&#123;</span><br><span class="line">				max = jobs[i].process;</span><br><span class="line">				idx = i;</span><br><span class="line">			&#125;</span><br><span class="line"></span><br><span class="line">		<span class="keyword">return</span> jobs.begin() + idx;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">void</span> <span class="title">update_end_time</span><span class="params">(<span class="built_in">vector</span>&lt;Job&gt; &amp;jobs, <span class="keyword">int</span> proc)</span></span></span><br><span class="line"><span class="function">	</span>&#123;</span><br><span class="line">		<span class="keyword">int</span> idx = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">		<span class="keyword">while</span> (idx &lt;= last_valid_idx)</span><br><span class="line">			jobs[idx++].end_time -= proc;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>然後在主程式這樣呼叫</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">void</span>)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	Moore_Hodgson schedule1&#123; &#123;<span class="number">1</span>,<span class="number">10</span>,<span class="number">15</span>&#125;,&#123;<span class="number">2</span>,<span class="number">3</span>,<span class="number">6</span>&#125;,&#123;<span class="number">3</span>,<span class="number">4</span>,<span class="number">9</span> &#125;,&#123;<span class="number">4</span>,<span class="number">8</span>,<span class="number">23</span>&#125;,&#123;<span class="number">5</span>,<span class="number">10</span>,<span class="number">20</span>&#125;,&#123;<span class="number">6</span>,<span class="number">6</span>,<span class="number">30</span>&#125; &#125;;</span><br><span class="line">	Moore_Hodgson schedule2&#123; &#123;<span class="number">1</span>,<span class="number">4</span>,<span class="number">6</span>&#125;,&#123;<span class="number">2</span>,<span class="number">3</span>,<span class="number">7</span>&#125;,&#123;<span class="number">3</span>,<span class="number">2</span>,<span class="number">8</span> &#125;,&#123;<span class="number">4</span>,<span class="number">5</span>,<span class="number">9</span>&#125;,&#123;<span class="number">5</span>,<span class="number">6</span>,<span class="number">1</span>&#125; &#125;;</span><br><span class="line"></span><br><span class="line">	<span class="built_in">cout</span> &lt;&lt; <span class="string">"Schedule 1 : "</span> &lt;&lt; schedule1 &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">	<span class="built_in">cout</span> &lt;&lt; <span class="string">"Schedule 2 : "</span> &lt;&lt; schedule2 &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>得到輸出<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Schedule 1 : 2 3 4 6 1 5</span><br><span class="line">Schedule 2 : 2 3 5 1 4</span><br></pre></td></tr></table></figure></p>
<p><br></p>
<h2 id="優化程式碼-O-NlogN"><a href="#優化程式碼-O-NlogN" class="headerlink" title="優化程式碼 O( NlogN )"></a>優化程式碼 O( NlogN )</h2><p>上述的暴力法中有許多搜尋與計算 job end time 是重複的<br>我們可以使用 Priority Queue 與依序加入工作的方式來加快演算法</p>
<h3 id="演算法"><a href="#演算法" class="headerlink" title="演算法"></a>演算法</h3><ol>
<li>一樣先依照 EDD 次序將 Jobs 排序</li>
<li>遍歷 Jobs，將 Job[i] 加入到 priority queue 中</li>
<li>將目前 end time 加上 Job[i] 的耗時</li>
<li>檢查此工作是否有超時 ( end time 是否大於 the due of Job[i] )</li>
<li>若超時，則從 priority queue 中去除最大者，將 end time 扣掉他。<br> 若有需要輸出最後結果的話，也在 overdue 上記錄該工作為超時</li>
<li>若沒有，則重複步驟 2，直到遍歷完 Jobs</li>
<li>輸出時，先依照排序過後的 Jobs 次序將未逾期的工作印出<br> 再以任意順序輸出已逾期工作</li>
</ol>
<h3 id="例子"><a href="#例子" class="headerlink" title="例子"></a>例子</h3><p>用上面的例子一來做說明</p>
<table>
<thead>
<tr>
<th>Job</th>
<th>1</th>
<th>2</th>
<th>3</th>
<th>4</th>
<th>5</th>
<th>6</th>
</tr>
</thead>
<tbody>
<tr>
<td>p<sub>i</sub> ( 所需時間 )</td>
<td>10</td>
<td>3</td>
<td>4</td>
<td>8</td>
<td>10</td>
<td>6</td>
</tr>
<tr>
<td>d<sub>i</sub> ( 期限 )</td>
<td>15</td>
<td>6</td>
<td>9</td>
<td>23</td>
<td>20</td>
<td>30</td>
</tr>
</tbody>
</table>
<p>先將 Jobs 依照期限排序</p>
<table>
<thead>
<tr>
<th>Job</th>
<th>2</th>
<th>3</th>
<th>1</th>
<th>5</th>
<th>4</th>
<th>6</th>
</tr>
</thead>
<tbody>
<tr>
<td>p<sub>i</sub> ( 所需時間 )</td>
<td>3</td>
<td>4</td>
<td>10</td>
<td>10</td>
<td>8</td>
<td>6</td>
</tr>
<tr>
<td>d<sub>i</sub> ( 期限 )</td>
<td>6</td>
<td>9</td>
<td>15</td>
<td>20</td>
<td>23</td>
<td>30</td>
</tr>
</tbody>
</table>
<p>現在就開始來排程</p>
<p>首先依序遍歷 Jobs</p>
<p><strong>(一)</strong> 加入 Job[1]</p>
<table>
<thead>
<tr>
<th>Job</th>
<th>2</th>
<th></th>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>p<sub>i</sub></td>
<td>3</td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>d<sub>i</sub></td>
<td>6</td>
<td></td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
<p>end time = 3，沒有超時</p>
<p><strong>(二)</strong> 加入 Job[2]</p>
<table>
<thead>
<tr>
<th>Job</th>
<th>2</th>
<th>3</th>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>p<sub>i</sub></td>
<td>3</td>
<td>4</td>
<td></td>
<td></td>
</tr>
<tr>
<td>d<sub>i</sub></td>
<td>6</td>
<td>9</td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
<p>end time = 7，沒有超時</p>
<p><strong>(三)</strong> 加入 Job[3]</p>
<table>
<thead>
<tr>
<th>Job</th>
<th>2</th>
<th>3</th>
<th>1</th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>p<sub>i</sub></td>
<td>3</td>
<td>4</td>
<td>10</td>
<td></td>
</tr>
<tr>
<td>d<sub>i</sub></td>
<td>6</td>
<td>9</td>
<td>15</td>
<td></td>
</tr>
</tbody>
</table>
<p>end time = 17，<strong>超時</strong><br>利用 priority queue 去除最大的，也就是將 J<sub>1</sub> 刪除<br>並減去他的工作時間，end time = 17 - 10 = 7</p>
<p><strong>(四)</strong> 加入 Job[4]</p>
<table>
<thead>
<tr>
<th>Job</th>
<th>2</th>
<th>3</th>
<th>5</th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>p<sub>i</sub></td>
<td>3</td>
<td>4</td>
<td>10</td>
<td></td>
</tr>
<tr>
<td>d<sub>i</sub></td>
<td>6</td>
<td>9</td>
<td>20</td>
<td></td>
</tr>
</tbody>
</table>
<p>end time = 17，沒有超時</p>
<p><strong>(五)</strong> 加入 Job[5]</p>
<table>
<thead>
<tr>
<th>Job</th>
<th>2</th>
<th>3</th>
<th>5</th>
<th>4</th>
</tr>
</thead>
<tbody>
<tr>
<td>p<sub>i</sub></td>
<td>3</td>
<td>4</td>
<td>10</td>
<td>8</td>
</tr>
<tr>
<td>d<sub>i</sub></td>
<td>6</td>
<td>9</td>
<td>20</td>
<td>23</td>
</tr>
</tbody>
</table>
<p>end time = 25，<strong>超時</strong><br>利用 priority queue 去除最大的，也就是將 Job<sub>5</sub> 刪除<br>並減去他的工作時間，end time = 25 - 10 = 15</p>
<p><strong>(六)</strong> 加入 Job[6]</p>
<table>
<thead>
<tr>
<th>Job</th>
<th>2</th>
<th>3</th>
<th>4</th>
<th>6</th>
</tr>
</thead>
<tbody>
<tr>
<td>p<sub>i</sub></td>
<td>3</td>
<td>4</td>
<td>8</td>
<td>6</td>
</tr>
<tr>
<td>d<sub>i</sub></td>
<td>6</td>
<td>9</td>
<td>23</td>
<td>30</td>
</tr>
</tbody>
</table>
<p>end time = 21，沒有超時</p>
<p>最後輸出答案為 : 2 -&gt; 3 -&gt; 4 -&gt; 6 -&gt; <strong>1</strong> -&gt; <strong>4</strong></p>
<h3 id="程式碼"><a href="#程式碼" class="headerlink" title="程式碼"></a>程式碼</h3><p>首先定義 Job 結構和比較大小的方法<br>由於我們不需要再記錄個別點的結束時間，因此就不需要 end_time 欄位了</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Job2</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">	<span class="keyword">int</span> index;</span><br><span class="line">	<span class="keyword">int</span> process;</span><br><span class="line">	<span class="keyword">int</span> due;</span><br><span class="line"></span><br><span class="line">	Job2(<span class="keyword">int</span> i = <span class="number">0</span>, <span class="keyword">int</span> p = <span class="number">0</span>, <span class="keyword">int</span> d = <span class="number">0</span>) : index&#123; i &#125;, process &#123; p &#125;, due&#123; d &#125; &#123;&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">inline</span> <span class="keyword">bool</span> <span class="keyword">operator</span>&lt;(<span class="keyword">const</span> Job2 &amp;lhs, <span class="keyword">const</span> Job2 &amp;rhs)</span><br><span class="line">&#123;</span><br><span class="line">	<span class="keyword">return</span> lhs.due &lt; rhs.due;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>再來我們還需要定義 Priority Queue 中紀錄資訊的結構</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Record</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">	<span class="keyword">int</span> index;</span><br><span class="line">	<span class="keyword">int</span> process;</span><br><span class="line"></span><br><span class="line">	Record(<span class="keyword">int</span> i = <span class="number">0</span>, <span class="keyword">int</span> p = <span class="number">0</span>) :index&#123; i &#125;, process&#123; p &#125; &#123;&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">inline</span> <span class="keyword">bool</span> <span class="keyword">operator</span>&lt;(<span class="keyword">const</span> Record &amp;lhs, <span class="keyword">const</span> Record &amp;rhs)</span><br><span class="line">&#123;</span><br><span class="line">	<span class="keyword">return</span> lhs.process &lt; rhs.process;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>主要演算法部分<br>要注意因為 Job 的 Index 是從 1 開始，所以要把 overdue 多開一個空間才可以用 Index 直接存取</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Moore_Hodgson_optimal</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	Moore_Hodgson_optimal(<span class="built_in">initializer_list</span>&lt;Job2&gt; int_list) : jobs&#123; int_list &#125;, overdue(jobs.size() + <span class="number">1</span>, <span class="literal">false</span>)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="comment">// 運算</span></span><br><span class="line">		operate();</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">friend</span> ostream&amp; <span class="keyword">operator</span>&lt;&lt;(ostream &amp;out, <span class="keyword">const</span> Moore_Hodgson_optimal &amp;schedule)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="comment">// 先輸出沒有超時的部分</span></span><br><span class="line">		<span class="keyword">for</span> (<span class="keyword">auto</span> i = <span class="number">0</span>; i &lt; schedule.jobs.size(); ++i)</span><br><span class="line">			<span class="keyword">if</span> (!schedule.overdue[schedule.jobs[i].index])</span><br><span class="line">				out &lt;&lt; schedule.jobs[i].index &lt;&lt; <span class="string">" "</span>;</span><br><span class="line"></span><br><span class="line">		<span class="comment">// 任意順序輸出超時的部分</span></span><br><span class="line">		<span class="keyword">for</span> (<span class="keyword">auto</span> i = <span class="number">1</span>; i &lt; schedule.overdue.size(); ++i)</span><br><span class="line">			<span class="keyword">if</span> (schedule.overdue[i])</span><br><span class="line">				out &lt;&lt; i &lt;&lt; <span class="string">" "</span>;</span><br><span class="line"></span><br><span class="line">		<span class="keyword">return</span> out;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">	<span class="built_in">vector</span>&lt;Job2&gt; jobs;</span><br><span class="line">	<span class="built_in">vector</span>&lt;<span class="keyword">bool</span>&gt; overdue;	<span class="comment">// 紀錄是否超時</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">	<span class="function"><span class="keyword">void</span> <span class="title">initial</span><span class="params">(<span class="keyword">void</span>)</span></span></span><br><span class="line"><span class="function">	</span>&#123;</span><br><span class="line">		sort(jobs.begin(), jobs.end());</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">void</span> <span class="title">operate</span><span class="params">(<span class="keyword">void</span>)</span></span></span><br><span class="line"><span class="function">	</span>&#123;</span><br><span class="line">		priority_queue&lt;Record&gt; pque;</span><br><span class="line"></span><br><span class="line">		<span class="comment">// 初始化 Jobs</span></span><br><span class="line">		initial();</span><br><span class="line"></span><br><span class="line">		<span class="keyword">int</span> sum_time = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">		<span class="keyword">for</span> (<span class="keyword">auto</span> &amp;job : jobs)</span><br><span class="line">		&#123;</span><br><span class="line">			<span class="comment">// 加入 priority queue</span></span><br><span class="line">			pque.push(&#123; job.index,job.process &#125;);</span><br><span class="line"></span><br><span class="line">			<span class="comment">// 加上此工作的耗時</span></span><br><span class="line">			sum_time += job.process;</span><br><span class="line"></span><br><span class="line">			<span class="comment">// 檢查是否會超時</span></span><br><span class="line">			<span class="keyword">if</span> (sum_time &gt; job.due)</span><br><span class="line">			&#123;</span><br><span class="line">				<span class="comment">// 刪掉最大耗時並記錄</span></span><br><span class="line">				sum_time -= pque.top().process;</span><br><span class="line">				overdue[pque.top().index] = <span class="literal">true</span>;</span><br><span class="line"></span><br><span class="line">				pque.pop();</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>主程式</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">void</span>)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	Moore_Hodgson_optimal oschedule1&#123; &#123;<span class="number">1</span>,<span class="number">10</span>,<span class="number">15</span>&#125;,&#123;<span class="number">2</span>,<span class="number">3</span>,<span class="number">6</span>&#125;,&#123;<span class="number">3</span>,<span class="number">4</span>,<span class="number">9</span> &#125;,&#123;<span class="number">4</span>,<span class="number">8</span>,<span class="number">23</span>&#125;,&#123;<span class="number">5</span>,<span class="number">10</span>,<span class="number">20</span>&#125;,&#123;<span class="number">6</span>,<span class="number">6</span>,<span class="number">30</span>&#125; &#125;;</span><br><span class="line">	Moore_Hodgson_optimal oschedule2&#123; &#123;<span class="number">1</span>,<span class="number">4</span>,<span class="number">6</span>&#125;,&#123;<span class="number">2</span>,<span class="number">3</span>,<span class="number">7</span>&#125;,&#123;<span class="number">3</span>,<span class="number">2</span>,<span class="number">8</span> &#125;,&#123;<span class="number">4</span>,<span class="number">5</span>,<span class="number">9</span>&#125;,&#123;<span class="number">5</span>,<span class="number">6</span>,<span class="number">11</span>&#125; &#125;;</span><br><span class="line"></span><br><span class="line">	<span class="built_in">cout</span> &lt;&lt; <span class="string">"Schedule 1 : "</span> &lt;&lt; oschedule1 &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">	<span class="built_in">cout</span> &lt;&lt; <span class="string">"Schedule 2 : "</span> &lt;&lt; oschedule2 &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>輸出</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Schedule 1 : 2 3 4 6 1 5</span><br><span class="line">Schedule 2 : 2 3 5 1 4</span><br></pre></td></tr></table></figure>
<p><br></p>
<h2 id="思考"><a href="#思考" class="headerlink" title="思考"></a>思考</h2><p>此演算法的目的是要讓未超時的工作數量最大化，也就是要讓逾期的工作量最小<br>整體的核心就是 <strong>Due</strong><br>所以先用 Due 去由小到大排序，再依序把一個一個工作加到排程中<br>若發現加入當前工作後此工作會超時，就從以加入的工作中選一個<strong>最耗費時間的</strong>把他刪除掉<br>可以想成是讓整體的彈性時間更大 ( 也就是完成目前排程工作的時間到排程最後一個工作期限的這段緩衝 )<br>重複此動作到所以工作皆加入，就會是一個 Minimum number of late jobs 的 Schedule</p>
<p><br></p>
<h2 id="證明演算法"><a href="#證明演算法" class="headerlink" title="證明演算法"></a>證明演算法</h2><p>我這邊就沒有證明了，因為我也沒有搞很懂QQ<br>若是有大大有興趣，可以看一下參考<br>我有放一些 Reference<br><strong>記得搞懂了要來留言教我呀</strong></p>
<p><br></p>
<hr>
<h2 id="參考網站"><a href="#參考網站" class="headerlink" title="參考網站"></a>參考網站</h2><ul>
<li><a href="https://books.google.com.tw/books?id=MAY1ZstmGPkC&amp;pg=SA12-PA2&amp;lpg=SA12-PA2&amp;dq=Hodgson%E2%80%99s+Algorithm&amp;source=bl&amp;ots=FCZ7dOX7u6&amp;sig=ACfU3U2KJIvRbc31LJAQpGiqxCHO0FxWHA&amp;hl=zh-TW&amp;sa=X&amp;ved=2ahUKEwi1vZX-5e3gAhXHfLwKHUB7B_0Q6AEwC3oECAgQAQ#v=onepage&amp;q=Hodgson%E2%80%99s%20Algorithm&amp;f=false" target="_blank" rel="noopener">Handbook of Scheduling: Algorithms, Models, and Performance Analysis</a></li>
<li><a href="http://morris821028.github.io/2014/11/21/uva-10154/" target="_blank" rel="noopener">讓我發現這個演算法的網站</a></li>
<li><a href="./OperationsScheduling.ppt">Operations Scheduling</a></li>
<li>論文 : <a href="https://www.sciencedirect.com/science/article/pii/0895717794902097" target="_blank" rel="noopener">Knapsack-like scheduling problems, the Moore-Hodgson algorithm and the ‘tower of sets’ property</a></li>
<li>論文 : <a href="https://pubsonline.informs.org/doi/abs/10.1287/mnsc.15.1.102" target="_blank" rel="noopener">An n Job, One Machine Sequencing Algorithm for Minimizing the Number of Late Jobs</a> ( 最早出現的文獻 )</li>
<li>論文 : <a href="./MooreHodgson.pdf">MooreHodgson</a></li>
</ul>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://nicknick0630.github.io/2019/03/04/UVa-10189-Trouble-of-13-Dots/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Chen Yu Sheng">
      <meta itemprop="description" content="紀錄我的程式學習">
      <meta itemprop="image" content="/upload/image/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Coding Road">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2019/03/04/UVa-10189-Trouble-of-13-Dots/" class="post-title-link" itemprop="url">UVa 10189 : Trouble of 13-Dots</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              

              
                
              

              <time title="Created: 2019-03-04 02:19:42" itemprop="dateCreated datePublished" datetime="2019-03-04T02:19:42+08:00">2019-03-04</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Edited on</span>
                
                <time title="Modified: 2019-03-05 01:42:56" itemprop="dateModified" datetime="2019-03-05T01:42:56+08:00">2019-03-05</time>
              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/UVa/" itemprop="url" rel="index"><span itemprop="name">UVa</span></a></span>

                
                
              
            </span>
          

          
            
            
              
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
            
                <span class="post-meta-item-text">Comments: </span>
                <a href="/2019/03/04/UVa-10189-Trouble-of-13-Dots/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2019/03/04/UVa-10189-Trouble-of-13-Dots/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="題目-UVa-Link"><a href="#題目-UVa-Link" class="headerlink" title="題目 :  UVa Link "></a>題目 : <a href="https://uva.onlinejudge.org/index.php?option=com_onlinejudge&amp;Itemid=8&amp;page=show_problem&amp;problem=1760" target="_blank" rel="noopener"> <small><b>UVa Link</b></small> </a></h2><p>有 N 種商品，每個價值為 V<sub>i</sub>、喜愛程度為 D<sub>i</sub>，求金額不超過 M 的話，Dot 小姐可以獲得的最大喜愛點數總合。<br>此外，若實際購買金額超過 ( exeed ) 2000 的話，可以多獲得 200 的回饋<br>也就是若是購買了 5000 元，則就可以購買總額 5200 元。</p>
<p><strong>測資(ㄧ)</strong><br><strong>Input : </strong></p>
<blockquote>
<p>500 4<br>100 2<br>100 3<br>200 3<br>400 4</p>
</blockquote>
<p><strong>Output : </strong></p>
<blockquote>
<p>8</p>
</blockquote>
<p><strong>測資(二)</strong><br><strong>Input : </strong></p>
<blockquote>
<p>1801 3<br>2000 3<br>1900 1<br>101 1<br>1801 3<br>2001 3<br>1900 1<br>101 1</p>
</blockquote>
<p><strong>Output : </strong></p>
<blockquote>
<p>2<br>3</p>
</blockquote>
<p><br></p>
<h2 id="核心思想"><a href="#核心思想" class="headerlink" title="核心思想"></a>核心思想</h2><p>觀察一下，可以發現這題是 01 背包問題再加上一點變形。</p>
<p>我們來一步一步慢慢思考。</p>
<p>這題由題意來看，並不需要剛剛好把錢花完，因此在初始化紀錄動態規劃過程的陣列 val 時可以全部初始化為 0<br>代表無論最高花費金額為多少，0 點喜愛點數都是合法的。計算完後，解答就是 val[M]</p>
<blockquote>
<p>反之，若條件是一定要剛好把錢花完，則要初始化為 -INFINITE (不合法狀態)，只有 val[0] = 0<br>因為只有 Value = 0 時是合法的，可以剛好取得 nothing，其他的 Value 皆為不合法</p>
</blockquote>
<p><strong>轉換方程式</strong></p>
<blockquote>
<p>從前 i 個商品中，總金額不超過 j 元的大最喜愛點數<br><code>val[i][j] = max(val[i-1][j], val[i-1][j-P[i]] + D[i])</code><br>或是縮減版的<br><code>val[j] = max(val[j], val[j - P[i]] + D[i])</code></p>
</blockquote>
<h2 id="解法引導"><a href="#解法引導" class="headerlink" title="解法引導"></a>解法引導</h2><p>若不考慮可以額外加 200 元的這個 bonus，當最高花費金額為 M 時，最後答案就是 val[M]</p>
<p>再將此 bonus 加入考慮時，我們就要來探討一下尷尬的邊界範圍，也就是在 2000 附近</p>
<ol>
<li><strong>M &lt;= 2000 且 M + 200 &lt;= 2000</strong><br>這種情況下因為不會觸碰到特殊規則，所以就是做完 01 背包問題後，解答為 val[M]</li>
<li><strong>M &gt; 2000</strong><br>這種情況下最後的解答為 val[M + 200]<br>因為若是最後購買的總合沒有用到 bonus ( 假設為 s 元且 s &lt;= 2000 )，那麼解答 val[M + 200] = val[M] = val[s]<br>若最後的購買總額 b &gt; 2000，那麼 val[M + 200] = val[b]</li>
<li><p><strong>M &lt;= 2000 且 M + 200 &gt; 2000</strong><br><img src="./2.png" width="300" height="100" style="margin: 10px 0; border: 5px black solid;">這種情況下整體的最佳解會落在以下 3 個區域</p>
<ul>
<li>A 區域 : 不會碰到特殊規則，答案為 val[M]</li>
<li>B 區域 : <strong>不合法地帶</strong>，因為購買金額超過了 M，但又沒有到達 2000，<strong>因此答案是 val[M]</strong></li>
<li>C 區域 : 答案為 val[M + 200]</li>
</ul>
<p>那麼要如何知道最佳解會落在那裡呢?<br>根據我們剛剛的前提，並不需要把錢都剛好花完<br>所以假設 val[i] 剛好更新為在花費不超過 i 元的情況下所能得到的最大喜愛點數 D<sub>i</sub><br>且下一個更新點為 val[k] = D<sub>k</sub> ( k &gt; i )<br>因此 val[i ~ k-1] 就皆會等於 D<sub>i</sub>，且 val[i] != val[i-1] 和 val[i] != val[k]<br>所以我們可以從 M+200 開始往回掃描，分析當 val[i] != val[i - 1] 時</p>
<ul>
<li>i &gt;= 2001 : 最佳解在 C 區，答案為 val[M+200]</li>
<li>i &lt;= 2000 且 i &gt; M : 最佳解在 B 區，答案為 val[M]</li>
<li>i &lt;= M : 最佳解在 A 區，答案為 val[M]</li>
</ul>
</li>
</ol>
<p>乍看之下，本題似乎已經解出來了呀 ~~  收工!!<br>但不知道各位有沒有注意到，第三種情況的答案會出問題!!!</p>
<p><strong><b style="font-size: 150%;">Why????</b></strong></p>
<p>原因在於 : <strong>若最佳解落在 B 區域，則會連帶地影響到 C 區域的最佳解</strong></p>
<p>舉例來說，若實際上不含 B 區域的最佳解在 C 區域且為 20 ( 下圖 )<br><img src="./3.png" width="300" height="100" style="margin: 10px 0; border: 5px black solid;"></p>
<p>但是若又在 B 區域找更好的解答 <strong>( 但實際上他是不合法的 )</strong>，他卻會把後面的真正解答蓋掉 ( 下圖 )<br><img src="./4.png" width="300" height="100" style="margin: 10px 0; border: 5px black solid;"></p>
<p>根據我們剛剛的演算法，當我們判斷出最佳解是落在 B 區域時<br>除非我們要在計算過程中去紀錄資訊，否則我們會沒辦法找回真正的解答</p>
<p>因此，我們需要修正我們的演算法</p>
<h2 id="正確解法"><a href="#正確解法" class="headerlink" title="正確解法"></a>正確解法</h2><p>可以發現，剛剛的問題是出在我們需要找的<strong>真正解答</strong>會被覆蓋掉<br>那麼我們就要想辦法去保留住他</p>
<p>一個很簡單的改變方式就是我們把我們剛剛的前提改一下<br>改成<strong>我們必須把錢剛好花完</strong>，因此在初始化 val 陣列時，只有 val[0] = 0，其餘皆為 -INFINITE ( 代表不合法 )</p>
<p>因此轉換方程式就要改為 : </p>
<blockquote>
<p>若 val[j-P[i]] 有合法的最佳解，則選出最大的<br><code>if(val[j - P[i]] != -INFINITE) --&gt; val[j] = max(val[j], val[j - P[i]] + D[i])</code></p>
</blockquote>
<p>並同樣來分析一下 3 種情況</p>
<ol>
<li><strong>M &lt;= 2000 且 M + 200 &lt;= 2000</strong><br>這種情況下因為不會觸碰到特殊規則，解答為 max( val[0] ~ val[M] )</li>
<li><strong>M &gt; 2000</strong><br>解答為 max( val[0] ~ val[M + 200] )</li>
<li><strong>M &lt;= 2000 且 M + 200 &gt; 2000</strong><br><img src="./2.png" width="300" height="100" style="margin: 10px 0; border: 5px black solid;">這種情況下整體的最佳解就是從 A 和 C 區域中去挑選</li>
</ol>
<p>改良過後，每一個合法解都會被保留住，最後只需要判斷出範圍並找出最大值就好</p>
<h2 id="程式碼"><a href="#程式碼" class="headerlink" title="程式碼"></a>程式碼</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	Solution()</span><br><span class="line">	&#123;</span><br><span class="line">		ios::sync_with_stdio(<span class="literal">false</span>);</span><br><span class="line">		<span class="built_in">cin</span>.tie(<span class="literal">nullptr</span>);</span><br><span class="line">		<span class="built_in">cout</span>.tie(<span class="literal">nullptr</span>);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">int</span> <span class="title">calculate</span><span class="params">(<span class="keyword">const</span> <span class="built_in">vector</span>&lt;pair&lt;<span class="keyword">int</span>, <span class="keyword">int</span>&gt;&gt; &amp;items, <span class="keyword">const</span> <span class="keyword">int</span> M)</span></span></span><br><span class="line"><span class="function">	</span>&#123;</span><br><span class="line">		<span class="keyword">const</span> <span class="keyword">int</span> Money = M + <span class="number">200</span>;</span><br><span class="line"></span><br><span class="line">		val.clear();</span><br><span class="line">		val.resize(Money + <span class="number">1</span>, <span class="number">-1000000</span>);</span><br><span class="line">		val[<span class="number">0</span>] = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">		<span class="keyword">int</span> i, k;</span><br><span class="line"></span><br><span class="line">		<span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; items.size(); ++i)</span><br><span class="line">			<span class="keyword">for</span> (k = Money; k &gt;= items[i].first; --k)</span><br><span class="line">				<span class="keyword">if</span> (val[k - items[i].first] &gt;= <span class="number">0</span>)	<span class="comment">// if has valid answer</span></span><br><span class="line">					val[k] = max(val[k], val[k - items[i].first] + items[i].second);</span><br><span class="line"></span><br><span class="line">		<span class="keyword">int</span> m = <span class="number">-1</span>;</span><br><span class="line"></span><br><span class="line">		<span class="keyword">if</span> (M &lt;= <span class="number">2000</span>)</span><br><span class="line">			m = max(find_max(<span class="number">0</span>, M), find_max(<span class="number">2001</span>, Money));</span><br><span class="line">		<span class="keyword">else</span></span><br><span class="line">			m = find_max(<span class="number">0</span>, Money);</span><br><span class="line"></span><br><span class="line">		<span class="keyword">return</span> m;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">	<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; val;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">int</span> <span class="title">find_max</span><span class="params">(<span class="keyword">int</span> start, <span class="keyword">int</span> end)</span> <span class="keyword">const</span></span></span><br><span class="line"><span class="function">	</span>&#123;</span><br><span class="line">		<span class="keyword">int</span> max = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">		<span class="keyword">for</span> (<span class="keyword">int</span> i = start; i &lt;= end; ++i)</span><br><span class="line">			<span class="keyword">if</span> (val[i] &gt; max)</span><br><span class="line">				max = val[i];</span><br><span class="line"></span><br><span class="line">		<span class="keyword">return</span> max;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">void</span>)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">int</span> money, items_n;</span><br><span class="line">	<span class="keyword">int</span> price, idx;</span><br><span class="line">	<span class="keyword">int</span> ans;</span><br><span class="line">	Solution s;</span><br><span class="line"></span><br><span class="line">	<span class="built_in">vector</span>&lt;pair&lt;<span class="keyword">int</span>, <span class="keyword">int</span>&gt;&gt; items(<span class="number">100</span>);</span><br><span class="line"></span><br><span class="line">	<span class="keyword">while</span> (<span class="built_in">cin</span> &gt;&gt; money)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="built_in">cin</span> &gt;&gt; items_n;</span><br><span class="line"></span><br><span class="line">		items.clear();</span><br><span class="line"></span><br><span class="line">		<span class="keyword">while</span> (items_n--)</span><br><span class="line">		&#123;</span><br><span class="line">			<span class="built_in">cin</span> &gt;&gt; price &gt;&gt; idx;</span><br><span class="line"></span><br><span class="line">			items.emplace_back(price, idx);</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">		ans = s.calculate(items, money);</span><br><span class="line"></span><br><span class="line">		<span class="built_in">cout</span> &lt;&lt; ans &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><br></p>
<hr>
<h2 id="UVa-真實測資"><a href="#UVa-真實測資" class="headerlink" title="UVa 真實測資"></a>UVa 真實測資</h2><p>以下我偷渡出來的 UVa 測資和我的程式 run 的解答，請低調享用</p>
<ol>
<li><a href="./UVa-10189-test-data.txt"> <strong>UVa 10819 Test Data</strong></a></li>
<li><a href="./ans.txt"><strong>My Ans</strong></a></li>
</ol>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://nicknick0630.github.io/2019/03/03/UVa-10130-SuperSale/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Chen Yu Sheng">
      <meta itemprop="description" content="紀錄我的程式學習">
      <meta itemprop="image" content="/upload/image/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Coding Road">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2019/03/03/UVa-10130-SuperSale/" class="post-title-link" itemprop="url">UVa 10130 : SuperSale</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              

              
                
              

              <time title="Created: 2019-03-03 00:15:49" itemprop="dateCreated datePublished" datetime="2019-03-03T00:15:49+08:00">2019-03-03</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Edited on</span>
                
                <time title="Modified: 2019-03-03 00:27:55" itemprop="dateModified" datetime="2019-03-03T00:27:55+08:00">2019-03-03</time>
              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/UVa/" itemprop="url" rel="index"><span itemprop="name">UVa</span></a></span>

                
                
              
            </span>
          

          
            
            
              
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
            
                <span class="post-meta-item-text">Comments: </span>
                <a href="/2019/03/03/UVa-10130-SuperSale/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2019/03/03/UVa-10130-SuperSale/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="題目-UVa-Link"><a href="#題目-UVa-Link" class="headerlink" title="題目 :  UVa Link "></a>題目 : <a href="https://uva.onlinejudge.org/index.php?option=com_onlinejudge&amp;Itemid=8&amp;page=show_problem&amp;problem=615" target="_blank" rel="noopener"> <small><b>UVa Link</b></small> </a></h2><p>有 N 項商品，每個價值為 V<sub>i</sub> 且重量為 W<sub>i</sub>，並有 G 個人，每個人的最大負重為 Q<sub>j</sub>，若每個人每種商品只能取一件，求所有人在自己的負重內可以取得的最大價值的總和。</p>
<p><strong>測資</strong><br><strong>Input : </strong></p>
<blockquote>
<p>2<br>3<br>72  17<br>44  23<br>31  24<br>1<br>26<br>6<br>64  26<br>85  22<br>52  4<br>99  18<br>39  13<br>54  9<br>4<br>23<br>20<br>20<br>26</p>
</blockquote>
<p><strong>Output : </strong></p>
<blockquote>
<p>72<br>514</p>
</blockquote>
<p><br></p>
<h2 id="解法"><a href="#解法" class="headerlink" title="解法"></a>解法</h2><p>此題就是 01 背包問題</p>
<h2 id="程式碼"><a href="#程式碼" class="headerlink" title="程式碼"></a>程式碼</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	Solution() : val(<span class="number">1000</span>)</span><br><span class="line">	&#123;</span><br><span class="line">		ios::sync_with_stdio(<span class="literal">false</span>);</span><br><span class="line">		<span class="built_in">cin</span>.tie(<span class="literal">nullptr</span>);</span><br><span class="line">		<span class="built_in">cout</span>.tie(<span class="literal">nullptr</span>);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">int</span> <span class="title">calculate</span><span class="params">(<span class="keyword">const</span> <span class="built_in">vector</span>&lt;pair&lt;<span class="keyword">int</span>, <span class="keyword">int</span>&gt;&gt; &amp;data, <span class="keyword">const</span> <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; &amp;mw, <span class="keyword">const</span> <span class="keyword">int</span> Max_Volumn)</span></span></span><br><span class="line"><span class="function">	</span>&#123;</span><br><span class="line">		initial(Max_Volumn);</span><br><span class="line"></span><br><span class="line">		<span class="keyword">int</span> i, k;</span><br><span class="line"></span><br><span class="line">		<span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; data.size(); ++i)</span><br><span class="line">			<span class="keyword">for</span> (k = Max_Volumn; k &gt;= data[i].second; --k)</span><br><span class="line">				val[k] = max(val[k], val[k - data[i].second] + data[i].first);</span><br><span class="line"></span><br><span class="line">		<span class="keyword">int</span> sum = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">		<span class="keyword">for</span> (<span class="keyword">auto</span> x : mw)</span><br><span class="line">			sum += val[x];</span><br><span class="line"></span><br><span class="line">		<span class="keyword">return</span> sum;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">	<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; val;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">void</span> <span class="title">initial</span><span class="params">(<span class="keyword">const</span> <span class="keyword">int</span> Max_Volumn)</span></span></span><br><span class="line"><span class="function">	</span>&#123;</span><br><span class="line">		val.clear();</span><br><span class="line"></span><br><span class="line">		val.resize(Max_Volumn + <span class="number">1</span>, <span class="number">0</span>);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">void</span>)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">int</span> total_case;</span><br><span class="line">	<span class="keyword">int</span> n;</span><br><span class="line">	<span class="keyword">int</span> price, weight;</span><br><span class="line">	<span class="keyword">int</span> n_people;</span><br><span class="line">	<span class="keyword">int</span> max_w;</span><br><span class="line">	<span class="keyword">int</span> m;</span><br><span class="line">	<span class="keyword">int</span> ans;</span><br><span class="line"></span><br><span class="line">	Solution s;</span><br><span class="line"></span><br><span class="line">	<span class="built_in">vector</span>&lt;pair&lt;<span class="keyword">int</span>, <span class="keyword">int</span>&gt;&gt; data(<span class="number">1000</span>);</span><br><span class="line">	<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; mw(<span class="number">100</span>);</span><br><span class="line"></span><br><span class="line">	<span class="built_in">cin</span> &gt;&gt; total_case;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">while</span> (total_case--)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="built_in">cin</span> &gt;&gt; n;</span><br><span class="line"></span><br><span class="line">		data.clear();</span><br><span class="line">		mw.clear();</span><br><span class="line"></span><br><span class="line">		<span class="keyword">while</span> (n--)</span><br><span class="line">		&#123;</span><br><span class="line">			<span class="built_in">cin</span> &gt;&gt; price &gt;&gt; weight;</span><br><span class="line"></span><br><span class="line">			data.emplace_back(price, weight);</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">		<span class="built_in">cin</span> &gt;&gt; n_people;</span><br><span class="line"></span><br><span class="line">		m = <span class="number">-1</span>;</span><br><span class="line"></span><br><span class="line">		<span class="keyword">while</span> (n_people--)</span><br><span class="line">		&#123;</span><br><span class="line">			<span class="built_in">cin</span> &gt;&gt; max_w;</span><br><span class="line"></span><br><span class="line">			<span class="keyword">if</span> (max_w &gt; m)</span><br><span class="line">				m = max_w;</span><br><span class="line"></span><br><span class="line">			mw.emplace_back(max_w);</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">		ans = s.calculate(data, mw, m);</span><br><span class="line"></span><br><span class="line">		<span class="built_in">cout</span> &lt;&lt; ans &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://nicknick0630.github.io/2019/03/01/UVa-10986-Sending-Email/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Chen Yu Sheng">
      <meta itemprop="description" content="紀錄我的程式學習">
      <meta itemprop="image" content="/upload/image/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Coding Road">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2019/03/01/UVa-10986-Sending-Email/" class="post-title-link" itemprop="url">UVa 10986 : Sending Email</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              

              
                
              

              <time title="Created: 2019-03-01 15:57:04" itemprop="dateCreated datePublished" datetime="2019-03-01T15:57:04+08:00">2019-03-01</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Edited on</span>
                
                <time title="Modified: 2019-03-01 17:11:17" itemprop="dateModified" datetime="2019-03-01T17:11:17+08:00">2019-03-01</time>
              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/UVa/" itemprop="url" rel="index"><span itemprop="name">UVa</span></a></span>

                
                
              
            </span>
          

          
            
            
              
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
            
                <span class="post-meta-item-text">Comments: </span>
                <a href="/2019/03/01/UVa-10986-Sending-Email/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2019/03/01/UVa-10986-Sending-Email/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="題目-UVa-Link"><a href="#題目-UVa-Link" class="headerlink" title="題目 :  UVa Link "></a>題目 : <a href="https://uva.onlinejudge.org/index.php?option=com_onlinejudge&amp;Itemid=8&amp;page=show_problem&amp;problem=1927" target="_blank" rel="noopener"> <small><b>UVa Link</b></small> </a></h2><p>Servers 互相用雙向電纜連接，求從指定開始 Server 到指定結束 Server 的最短路徑長</p>
<p><strong>測資</strong><br><strong>Input : </strong></p>
<blockquote>
<p>3<br>2 1 0 1<br>0 1 100<br>3 3 2 0<br>0 1 100<br>0 2 200<br>1 2 50<br>2 0 0 1</p>
</blockquote>
<p><strong>Output : </strong></p>
<blockquote>
<p>Case #1: 100<br>Case #2: 150<br>Case #3: unreachable</p>
</blockquote>
<p><br></p>
<h2 id="解法"><a href="#解法" class="headerlink" title="解法"></a>解法</h2><p>因為沒有負權重的邊，因此使用 Dijkstra Algorithm<br>並用 Adjacent List 和 Priority Queue 來實作</p>
<p><br></p>
<h2 id="完整程式碼"><a href="#完整程式碼" class="headerlink" title="完整程式碼"></a>完整程式碼</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;list&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;queue&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> T&gt;</span><br><span class="line"><span class="keyword">using</span> Matrix = <span class="built_in">vector</span>&lt;<span class="built_in">list</span>&lt;T&gt;&gt;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">constexpr</span> <span class="keyword">int</span> INF = <span class="number">100000</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Edge</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">	<span class="keyword">int</span> idx;</span><br><span class="line">	<span class="keyword">int</span> weight;</span><br><span class="line"></span><br><span class="line">	Edge(<span class="keyword">int</span> i = <span class="number">-1</span>, <span class="keyword">int</span> w = INF) : idx&#123; i &#125;, weight&#123; w &#125; &#123;&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 由於 c++ 的 priority queue 是 max priority queue，所以要相反比較</span></span><br><span class="line"><span class="keyword">inline</span> <span class="keyword">bool</span> <span class="keyword">operator</span>&lt;(<span class="keyword">const</span> Edge &amp;lhs, <span class="keyword">const</span> Edge &amp;rhs)</span><br><span class="line">&#123;</span><br><span class="line">	<span class="keyword">return</span> lhs.weight &gt; rhs.weight;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	Solution()</span><br><span class="line">	&#123;</span><br><span class="line">		ios::sync_with_stdio(<span class="literal">false</span>);</span><br><span class="line">		<span class="built_in">cin</span>.tie(<span class="literal">nullptr</span>);</span><br><span class="line">		<span class="built_in">cout</span>.tie(<span class="literal">nullptr</span>);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">int</span> <span class="title">calculate</span><span class="params">(<span class="keyword">const</span> Matrix&lt;Edge&gt; &amp;w, <span class="keyword">const</span> <span class="keyword">int</span> Vertices, <span class="keyword">const</span> <span class="keyword">int</span> start, <span class="keyword">const</span> <span class="keyword">int</span> end)</span></span></span><br><span class="line"><span class="function">	</span>&#123;</span><br><span class="line">		initialize(Vertices);</span><br><span class="line"></span><br><span class="line">		priority_queue&lt;Edge&gt; que;</span><br><span class="line"></span><br><span class="line">		<span class="keyword">int</span> min_idx = start;</span><br><span class="line"></span><br><span class="line">		dist[min_idx] = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">		que.push(&#123; min_idx,<span class="number">0</span> &#125;);</span><br><span class="line"></span><br><span class="line">		<span class="keyword">while</span> (<span class="literal">true</span>)</span><br><span class="line">		&#123;</span><br><span class="line">			min_idx = get_min_edge(que);</span><br><span class="line"></span><br><span class="line">			<span class="keyword">if</span> (min_idx == end || min_idx == <span class="number">-1</span>)</span><br><span class="line">				<span class="keyword">break</span>;</span><br><span class="line"></span><br><span class="line">			checked[min_idx] = <span class="literal">true</span>;</span><br><span class="line"></span><br><span class="line">			relax(w, min_idx, que);</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">		<span class="keyword">return</span> dist[end];</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">	<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; dist;</span><br><span class="line">	<span class="built_in">vector</span>&lt;<span class="keyword">bool</span>&gt; checked;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">void</span> <span class="title">initialize</span><span class="params">(<span class="keyword">const</span> <span class="keyword">int</span> Vertices)</span></span></span><br><span class="line"><span class="function">	</span>&#123;</span><br><span class="line">		dist.clear();</span><br><span class="line">		checked.clear();</span><br><span class="line"></span><br><span class="line">		dist.resize(Vertices, INF);</span><br><span class="line">		checked.resize(Vertices, <span class="literal">false</span>);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">int</span> <span class="title">get_min_edge</span><span class="params">(priority_queue&lt;Edge&gt; &amp;que)</span> <span class="keyword">const</span></span></span><br><span class="line"><span class="function">	</span>&#123;</span><br><span class="line">		<span class="keyword">int</span> min_idx = <span class="number">-1</span>;</span><br><span class="line"></span><br><span class="line">		<span class="comment">// get the min distance</span></span><br><span class="line">		<span class="keyword">while</span> (!que.empty() &amp;&amp; checked[min_idx = que.top().idx])</span><br><span class="line">			que.pop();</span><br><span class="line"></span><br><span class="line">		<span class="keyword">return</span> min_idx;</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="function"><span class="keyword">void</span> <span class="title">relax</span><span class="params">(<span class="keyword">const</span> Matrix&lt;Edge&gt; &amp;w, <span class="keyword">const</span> <span class="keyword">int</span> pivot, priority_queue&lt;Edge&gt; &amp;que)</span></span></span><br><span class="line"><span class="function">	</span>&#123;</span><br><span class="line">		<span class="keyword">int</span> d;</span><br><span class="line"></span><br><span class="line">		<span class="comment">//            out.weight</span></span><br><span class="line">		<span class="comment">//  pivot ------------------&gt;  out.idx</span></span><br><span class="line"></span><br><span class="line">		<span class="keyword">for</span> (<span class="keyword">auto</span> &amp;out : w[pivot])</span><br><span class="line">		&#123;</span><br><span class="line">			<span class="keyword">if</span> (!checked[out.idx] &amp;&amp; (d = dist[pivot] + out.weight) &lt; dist[out.idx])</span><br><span class="line">			&#123;</span><br><span class="line">				dist[out.idx] = d;</span><br><span class="line">				que.push(&#123; out.idx,d &#125;);</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">void</span>)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">int</span> total_cases;</span><br><span class="line">	<span class="keyword">int</span> vertices, edges;</span><br><span class="line">	<span class="keyword">int</span> start, end;</span><br><span class="line">	<span class="keyword">int</span> ans;</span><br><span class="line">	</span><br><span class="line">	Solution s;</span><br><span class="line">	Matrix&lt;Edge&gt; w(<span class="number">20000</span>);</span><br><span class="line"></span><br><span class="line">	<span class="keyword">int</span> t = <span class="number">0</span>;</span><br><span class="line">	<span class="keyword">int</span> a, b, v;</span><br><span class="line"></span><br><span class="line">	<span class="built_in">cin</span> &gt;&gt; total_cases;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">	<span class="keyword">while</span> (t++ &lt; total_cases)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="built_in">cin</span> &gt;&gt; vertices &gt;&gt; edges &gt;&gt; start &gt;&gt; end;</span><br><span class="line"></span><br><span class="line">		w.clear();</span><br><span class="line">		w.resize(vertices);</span><br><span class="line"></span><br><span class="line">		<span class="keyword">while</span> (edges--)</span><br><span class="line">		&#123;</span><br><span class="line">			<span class="built_in">cin</span> &gt;&gt; a &gt;&gt; b &gt;&gt; v;</span><br><span class="line"></span><br><span class="line">			<span class="comment">// 雙向</span></span><br><span class="line">			w[a].push_back(&#123; b,v &#125;);</span><br><span class="line">			w[b].push_back(&#123; a,v &#125;);</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">		ans = s.calculate(w, vertices, start, end);</span><br><span class="line"></span><br><span class="line">		<span class="built_in">cout</span> &lt;&lt; <span class="string">"Case #"</span> &lt;&lt; t &lt;&lt; <span class="string">": "</span>;</span><br><span class="line">		<span class="keyword">if</span> (ans &gt;= INF)</span><br><span class="line">			<span class="built_in">cout</span> &lt;&lt; <span class="string">"unreachable"</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">		<span class="keyword">else</span></span><br><span class="line">			<span class="built_in">cout</span> &lt;&lt; ans &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://nicknick0630.github.io/2019/03/01/UVa-929-Number-Maze/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Chen Yu Sheng">
      <meta itemprop="description" content="紀錄我的程式學習">
      <meta itemprop="image" content="/upload/image/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Coding Road">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2019/03/01/UVa-929-Number-Maze/" class="post-title-link" itemprop="url">UVa 929 : Number Maze</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              

              
                
              

              <time title="Created: 2019-03-01 01:09:21" itemprop="dateCreated datePublished" datetime="2019-03-01T01:09:21+08:00">2019-03-01</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Edited on</span>
                
                <time title="Modified: 2019-03-06 23:58:52" itemprop="dateModified" datetime="2019-03-06T23:58:52+08:00">2019-03-06</time>
              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/UVa/" itemprop="url" rel="index"><span itemprop="name">UVa</span></a></span>

                
                
              
            </span>
          

          
            
            
              
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
            
                <span class="post-meta-item-text">Comments: </span>
                <a href="/2019/03/01/UVa-929-Number-Maze/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2019/03/01/UVa-929-Number-Maze/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="題目-UVa-Link"><a href="#題目-UVa-Link" class="headerlink" title="題目 :  UVa Link "></a>題目 : <a href="https://uva.onlinejudge.org/index.php?option=com_onlinejudge&amp;Itemid=8&amp;page=show_problem&amp;problem=870" target="_blank" rel="noopener"> <small><b>UVa Link</b></small> </a></h2><p>給定一個 M x N 的矩陣 A ，求 A<sub>1,1</sub> 到 A<sub>M,N</sub> 的最短路徑長</p>
<p><strong>測資</strong><br><strong>Input : </strong></p>
<blockquote>
<p>2<br>4<br>5<br>0 3 1 2 9<br>7 3 4 9 9<br>1 7 5 5 3<br>2 3 4 2 5<br>1<br>6<br>0 1 2 3 4 5</p>
</blockquote>
<p><strong>Output : </strong></p>
<blockquote>
<p>24<br>15</p>
</blockquote>
<p><br></p>
<h2 id="解法"><a href="#解法" class="headerlink" title="解法"></a>解法</h2><p>這題要解的就是 Single Source To Other Destinations 的 Shortest Path<br>我們考慮一下 2 種比較常見的演算法 : </p>
<table>
<thead>
<tr>
<th></th>
<th>Dijkstra Algorithm</th>
<th>Bellman-Ford Algorithm</th>
</tr>
</thead>
<tbody>
<tr>
<td>策略</td>
<td>Greedy</td>
<td>Dynamic Program</td>
</tr>
<tr>
<td>可有負邊</td>
<td>不可</td>
<td>可</td>
</tr>
<tr>
<td>時間複雜度</td>
<td>O( N<sup>2</sup> )</td>
<td>O( N<sup>3</sup> )</td>
</tr>
</tbody>
</table>
<p>由於此題目中邊的權重為 0 ~ 9，沒有負邊<br>因此選擇使用 <strong>Dijkstra Algorithm</strong> 更經濟實惠一點</p>
<p>不過在實作演算時我們需要稍微改變一點細節<br>紀錄與 Source 的最短距離的一為陣列要改為使用二維陣列<br>此外，我們選擇使用 priority queue 來找出最小邊<br>除了可以加速演算法，對這題來說也比較好實作</p>
<p><br></p>
<h2 id="程式碼解說"><a href="#程式碼解說" class="headerlink" title="程式碼解說"></a>程式碼解說</h2><ol>
<li>dist[m + 2][n + 2] :<br> 紀錄各點到 source (本題是 &lt;1,1&gt; ) 的距離，此外為了讓 index 從 1 開始，在 row 和 column 前面各加了一列(行)空白<br> 此外，為了方便計算，在最後面也各加了一列(行)空白</li>
<li>checked[m + 2][n + 2] :<br> 紀錄該點使否已經是最短路徑，前後同樣加了空白<br> 並將空白行視為已經是最短路徑，比較方便計算</li>
</ol>
<p><br></p>
<h2 id="完整程式碼"><a href="#完整程式碼" class="headerlink" title="完整程式碼"></a>完整程式碼</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;queue&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> T&gt;</span><br><span class="line"><span class="keyword">using</span> Matrix = <span class="built_in">vector</span>&lt;<span class="built_in">vector</span>&lt;T&gt;&gt;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">constexpr</span> <span class="keyword">int</span> MAX = <span class="number">999</span>;</span><br><span class="line"><span class="keyword">constexpr</span> <span class="keyword">int</span> INF = <span class="number">100000</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 放在 priority queue 中的儲存資料</span></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Record</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">	<span class="keyword">int</span> row;</span><br><span class="line">	<span class="keyword">int</span> col;</span><br><span class="line">	<span class="keyword">int</span> dist;	<span class="comment">// 當前 ( row, col ) 到 source 的最短路徑</span></span><br><span class="line"></span><br><span class="line">	Record(<span class="keyword">int</span> p = <span class="number">0</span>, <span class="keyword">int</span> t = <span class="number">0</span>, <span class="keyword">int</span> d = <span class="number">0</span>) :row&#123; p &#125;, col&#123; t &#125;, dist&#123; d &#125; &#123;&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 由於 c++ 的 priority queue 是 max priority queue，所以要相反定義</span></span><br><span class="line"><span class="keyword">inline</span> <span class="keyword">bool</span> <span class="keyword">operator</span>&lt;(<span class="keyword">const</span> Record &amp;lhs, <span class="keyword">const</span> Record &amp;rhs)</span><br><span class="line">&#123;</span><br><span class="line">	<span class="keyword">return</span> lhs.dist &gt; rhs.dist;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	Solution()</span><br><span class="line">	&#123;</span><br><span class="line">		ios::sync_with_stdio(<span class="literal">false</span>);</span><br><span class="line">		<span class="built_in">cin</span>.tie(<span class="literal">nullptr</span>);</span><br><span class="line">		<span class="built_in">cout</span>.tie(<span class="literal">nullptr</span>);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">int</span> <span class="title">calculate</span><span class="params">(<span class="keyword">const</span> Matrix&lt;<span class="keyword">int</span>&gt; &amp;m, <span class="keyword">const</span> <span class="keyword">int</span> ROW, <span class="keyword">const</span> <span class="keyword">int</span> COL)</span></span></span><br><span class="line"><span class="function">	</span>&#123;</span><br><span class="line">		Record min_rec;</span><br><span class="line">		priority_queue&lt;Record&gt; que;</span><br><span class="line"></span><br><span class="line">		<span class="keyword">int</span> mr, mc;</span><br><span class="line"></span><br><span class="line">		<span class="comment">// 初始化資料</span></span><br><span class="line">		initialize(ROW, COL);</span><br><span class="line"></span><br><span class="line">		<span class="comment">// 加入起始點</span></span><br><span class="line">		que.push(Record&#123; <span class="number">1</span>,<span class="number">1</span>,m[<span class="number">1</span>][<span class="number">1</span>] &#125;);</span><br><span class="line"></span><br><span class="line">		<span class="keyword">while</span> (!checked[ROW][COL])</span><br><span class="line">		&#123;</span><br><span class="line">			<span class="comment">// get the min edge from the available edges with priority queue</span></span><br><span class="line">			min_rec = extract_min(que);</span><br><span class="line"></span><br><span class="line">			mr = min_rec.row;</span><br><span class="line">			mc = min_rec.col;</span><br><span class="line"></span><br><span class="line">			<span class="comment">// set the edge to be checked</span></span><br><span class="line">			dist[mr][mc] = min_rec.dist;</span><br><span class="line">			checked[mr][mc] = <span class="literal">true</span>;</span><br><span class="line"></span><br><span class="line">			<span class="comment">// update the neighbor nodes</span></span><br><span class="line">			update_and_relax(m, que, mr, mc);</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">		<span class="keyword">return</span> dist[ROW][COL];</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">	Matrix&lt;<span class="keyword">int</span>&gt; dist;</span><br><span class="line">	Matrix&lt;<span class="keyword">bool</span>&gt; checked;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">void</span> <span class="title">initialize</span><span class="params">(<span class="keyword">const</span> <span class="keyword">int</span> ROW, <span class="keyword">const</span> <span class="keyword">int</span> COL)</span></span></span><br><span class="line"><span class="function">	</span>&#123;</span><br><span class="line">		dist.clear();</span><br><span class="line">		checked.clear();</span><br><span class="line"></span><br><span class="line">		dist.resize(ROW + <span class="number">2</span>, <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;(COL + <span class="number">2</span>, INF));</span><br><span class="line">		checked.resize(ROW + <span class="number">2</span>, <span class="built_in">vector</span>&lt;<span class="keyword">bool</span>&gt;(COL + <span class="number">2</span>, <span class="literal">false</span>));</span><br><span class="line"></span><br><span class="line">		<span class="comment">// 將空白行視為已經是最短路徑 ( 方便計算 )</span></span><br><span class="line">		initial_checked();</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">void</span> <span class="title">initial_checked</span><span class="params">(<span class="keyword">void</span>)</span></span></span><br><span class="line"><span class="function">	</span>&#123;</span><br><span class="line">		<span class="keyword">int</span> i;</span><br><span class="line">		<span class="keyword">int</span> re = checked.size() - <span class="number">1</span>;</span><br><span class="line">		<span class="keyword">int</span> ce = checked[<span class="number">0</span>].size() - <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">		<span class="keyword">for</span> (i = <span class="number">0</span>; i &lt;= ce; ++i)</span><br><span class="line">			checked[<span class="number">0</span>][i] = checked[re][i] = <span class="literal">true</span>;</span><br><span class="line"></span><br><span class="line">		<span class="keyword">for</span> (i = <span class="number">0</span>; i &lt;= re; ++i)</span><br><span class="line">			checked[i][<span class="number">0</span>] = checked[i][ce] = <span class="literal">true</span>;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function">Record <span class="title">extract_min</span><span class="params">(priority_queue&lt;Record&gt; &amp;que)</span> <span class="keyword">const</span></span></span><br><span class="line"><span class="function">	</span>&#123;</span><br><span class="line">		Record rec;</span><br><span class="line"></span><br><span class="line">		<span class="keyword">if</span> (!que.empty())</span><br><span class="line">		&#123;</span><br><span class="line">			rec = que.top();</span><br><span class="line">			que.pop();</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">		<span class="keyword">return</span> rec;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">void</span> <span class="title">update_and_relax</span><span class="params">(<span class="keyword">const</span> Matrix&lt;<span class="keyword">int</span>&gt; &amp;m, priority_queue&lt;Record&gt; &amp;que, <span class="keyword">const</span> <span class="keyword">int</span> now_r, <span class="keyword">const</span> <span class="keyword">int</span> now_c)</span></span></span><br><span class="line"><span class="function">	</span>&#123;</span><br><span class="line">		<span class="comment">// 四個方向 : 左、右、下、上</span></span><br><span class="line">		<span class="keyword">static</span> <span class="keyword">const</span> <span class="built_in">vector</span>&lt;pair&lt;<span class="keyword">int</span>, <span class="keyword">int</span>&gt;&gt; DIR = &#123; &#123;<span class="number">0</span>,<span class="number">-1</span>&#125; ,&#123;<span class="number">0</span>,<span class="number">1</span>&#125;,&#123;<span class="number">1</span>,<span class="number">0</span>&#125;,&#123;<span class="number">-1</span>,<span class="number">0</span>&#125; &#125;;</span><br><span class="line"></span><br><span class="line">		<span class="keyword">int</span> d, new_r, new_c;</span><br><span class="line"></span><br><span class="line">		<span class="keyword">for</span> (<span class="keyword">auto</span> &amp;dir : DIR)</span><br><span class="line">		&#123;</span><br><span class="line">			new_r = now_r + dir.first;</span><br><span class="line">			new_c = now_c + dir.second;</span><br><span class="line"></span><br><span class="line">			<span class="keyword">if</span> (!checked[new_r][new_c])</span><br><span class="line">			&#123;</span><br><span class="line">				d = dist[now_r][now_c] + m[new_r][new_c];</span><br><span class="line"></span><br><span class="line">				<span class="keyword">if</span> (d &lt; dist[new_r][new_c])</span><br><span class="line">				&#123;</span><br><span class="line">					dist[new_r][new_c] = d;</span><br><span class="line">					que.push(Record&#123; new_r, new_c, d &#125;);</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;</span><br><span class="line"></span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">void</span>)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">int</span> total_case;</span><br><span class="line">	<span class="keyword">int</span> row, col;</span><br><span class="line">	<span class="keyword">int</span> r, c, n, ans;</span><br><span class="line">	Solution s;</span><br><span class="line"></span><br><span class="line">	Matrix&lt;<span class="keyword">int</span>&gt; m(MAX + <span class="number">1</span>, <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;(MAX + <span class="number">1</span>));</span><br><span class="line"></span><br><span class="line">	<span class="built_in">cin</span> &gt;&gt; total_case;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">while</span> (total_case--)</span><br><span class="line">	&#123;</span><br><span class="line">		m.clear();</span><br><span class="line"></span><br><span class="line">		<span class="built_in">cin</span> &gt;&gt; row &gt;&gt; col;</span><br><span class="line">		<span class="built_in">cin</span>.get();</span><br><span class="line"></span><br><span class="line">		m.resize(row + <span class="number">2</span>, <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;(col + <span class="number">2</span>, INF));</span><br><span class="line"></span><br><span class="line">		<span class="keyword">for</span> (r = <span class="number">1</span>; r &lt;= row; ++r)</span><br><span class="line">		&#123;</span><br><span class="line">			<span class="keyword">for</span> (c = <span class="number">1</span>; c &lt;= col; ++c)</span><br><span class="line">			&#123;</span><br><span class="line">				<span class="built_in">cin</span> &gt;&gt; n;</span><br><span class="line">				m[r][c] = n;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">		ans = s.calculate(m, row, col);</span><br><span class="line"></span><br><span class="line">		<span class="built_in">cout</span> &lt;&lt; ans &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><br></p>
<h2 id="複雜度分析"><a href="#複雜度分析" class="headerlink" title="複雜度分析"></a>複雜度分析</h2><p>看一下主要的程式碼架構部分</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">calculate</span><span class="params">(<span class="keyword">const</span> Matrix&lt;<span class="keyword">int</span>&gt; &amp;m, <span class="keyword">const</span> <span class="keyword">int</span> ROW, <span class="keyword">const</span> <span class="keyword">int</span> COL)</span></span></span><br><span class="line"><span class="function">	</span>&#123;</span><br><span class="line">		Record min_rec;</span><br><span class="line">		priority_queue&lt;Record&gt; que;</span><br><span class="line"></span><br><span class="line">		<span class="keyword">int</span> mr, mc;</span><br><span class="line"></span><br><span class="line">		<span class="comment">// 初始化資料</span></span><br><span class="line">		initialize(ROW, COL);</span><br><span class="line"></span><br><span class="line">		<span class="comment">// 加入起始點</span></span><br><span class="line">		que.push(Record&#123; <span class="number">1</span>,<span class="number">1</span>,m[<span class="number">1</span>][<span class="number">1</span>] &#125;);</span><br><span class="line"></span><br><span class="line">		<span class="keyword">while</span> (!checked[ROW][COL])</span><br><span class="line">		&#123;</span><br><span class="line">			<span class="comment">// get the min edge from the available edges with priority queue</span></span><br><span class="line">			min_rec = extract_min(que);</span><br><span class="line"></span><br><span class="line">			mr = min_rec.row;</span><br><span class="line">			mc = min_rec.col;</span><br><span class="line"></span><br><span class="line">			<span class="comment">// set the edge to be checked</span></span><br><span class="line">			dist[mr][mc] = min_rec.dist;</span><br><span class="line">			checked[mr][mc] = <span class="literal">true</span>;</span><br><span class="line"></span><br><span class="line">			<span class="comment">// update the neighbor nodes</span></span><br><span class="line">			update_and_relax(m, que, mr, mc);</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">		<span class="keyword">return</span> dist[ROW][COL];</span><br><span class="line">	&#125;</span><br></pre></td></tr></table></figure>
<h3 id="維護-priority-queue"><a href="#維護-priority-queue" class="headerlink" title="維護 priority queue"></a>維護 priority queue</h3><ol>
<li><strong>min_rec = extract_min(que);</strong><br> extract a element from priority queue : O(logE)</li>
<li><strong>update_and_relax(m, que, mr, mc);</strong><br> 迴圈次數 2 次 : O(1)<br> 如果有 push element in priority queue : O(logE)</li>
</ol>
<p>每個頂點都會有 4 條邊 ( 上、下、右、左 )<br>所以總邊數 = 4 x M x N - M - N –&gt; O(MN) –&gt; O( V )</p>
<p>因此，本題的 Edge 可是大約視作為 Vertex 的數目，所以對 priority queue 的操作也可看為 O( logV )<br>此外每個邊皆用於 relaxation 一次，priority queue 的操作最多共執行 E 次<br>所以維護 priority queue 的時間複雜度為 O(VlogV)</p>
<h3 id="迴圈"><a href="#迴圈" class="headerlink" title="迴圈"></a>迴圈</h3><p>迴圈最多走訪 V 次</p>
<h3 id="總時間"><a href="#總時間" class="headerlink" title="總時間"></a>總時間</h3><p>時間複雜度 : 迴圈 + 維護 priority queue = <strong>O(V + VlogV)</strong></p>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://nicknick0630.github.io/2019/02/26/UVa-100-3n-1/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Chen Yu Sheng">
      <meta itemprop="description" content="紀錄我的程式學習">
      <meta itemprop="image" content="/upload/image/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Coding Road">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2019/02/26/UVa-100-3n-1/" class="post-title-link" itemprop="url">UVa 100 : 3n+1</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              

              
                
              

              <time title="Created: 2019-02-26 00:02:20" itemprop="dateCreated datePublished" datetime="2019-02-26T00:02:20+08:00">2019-02-26</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Edited on</span>
                
                <time title="Modified: 2019-02-26 00:37:54" itemprop="dateModified" datetime="2019-02-26T00:37:54+08:00">2019-02-26</time>
              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/UVa/" itemprop="url" rel="index"><span itemprop="name">UVa</span></a></span>

                
                
              
            </span>
          

          
            
            
              
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
            
                <span class="post-meta-item-text">Comments: </span>
                <a href="/2019/02/26/UVa-100-3n-1/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2019/02/26/UVa-100-3n-1/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="題目-UVa"><a href="#題目-UVa" class="headerlink" title="題目 : UVa"></a>題目 : <a href="https://uva.onlinejudge.org/index.php?Itemid=8&amp;option=com_onlinejudge&amp;page=show_problem&amp;problem=36" target="_blank" rel="noopener">UVa</a></h2><p>對一個整數 k，利用以下 2 個規則<br>可以得出一個特定的序列 S<sub>k</sub> : A<sub>1</sub>、A<sub>2</sub> . . . A<sub>n</sub>，其中 A<sub>n</sub> = 1</p>
<blockquote>
<p>規則</p>
<ol>
<li>當 A<sub>k</sub> 是偶數 : A<sub>k</sub> = A<sub>k-1</sub> / 2</li>
<li>當 A<sub>k</sub> 是奇數 : A<sub>k</sub> = 3 * A<sub>k-1</sub> + 1</li>
</ol>
</blockquote>
<p>本題目會輸入 2 個正整數 a 、 b，並求出在 [ a , b ] 區間中，序列長度最長者</p>
<p>例如 : 以下列舉出前幾個數的序列長度</p>
<table>
<thead>
<tr>
<th>S<sub>k</sub></th>
<th>1</th>
<th>2</th>
<th>3</th>
<th>4</th>
<th>5</th>
<th>6</th>
<th>7</th>
<th>8</th>
<th>9</th>
<th>10</th>
</tr>
</thead>
<tbody>
<tr>
<td>長度</td>
<td>1</td>
<td>2</td>
<td>8</td>
<td>3</td>
<td>6</td>
<td>9</td>
<td>17</td>
<td>4</td>
<td>20</td>
<td>7</td>
</tr>
</tbody>
</table>
<p>因此若輸入 <code>1 10</code><br>答案就是 <code>20</code> ( S<sub>7</sub> )</p>
<p><strong>測資</strong><br><strong>Input : </strong></p>
<blockquote>
<p>1 10<br>100 200<br>201 210<br>900 1000</p>
</blockquote>
<p><strong>Output : </strong></p>
<blockquote>
<p>1 10 20<br>100 200 125<br>201 210 89<br>900 1000 174</p>
</blockquote>
<p><br></p>
<h2 id="解法"><a href="#解法" class="headerlink" title="解法"></a>解法</h2><p>很簡單的算術題，但是如果真的傻傻的每次都從 a “ 重新 “ 算到 b，會浪費掉很多時間<br>因為題目會給很多組測資，裡面一定會有大量重複的區間</p>
<p>因此，我們可以用空間換取時間，把算過的 S<sub>k</sub> 給記錄下來<br>這邊我選擇只記錄到 S<sub>10000</sub>，因為題目給定的輸入範圍就是 ( 0, 10000 )<br>但是我們有可能會遇到超過 10000 的數字，比如 9999 -&gt; <strong>29998 (爆了)</strong><br>所以超出 10000 的數字我們還是必須要土法煉鋼<br>但在 10000 內的數字我們可以很快的就得到答案</p>
<p>例如 :<br>上面我們已經紀錄了 1 ~ 10 的長度了<br>現在要計算 64<br>S<sub>64</sub> : 64 -&gt; 32 -&gt; 16 -&gt; <strong>8</strong><br>在這裡遇到 8 ( 已經紀錄過 )，因此剩下的部分就會跟 S<sub>8</sub> 重疊<br>所以長度就是 S<sub>64</sub> = 3 + S<sub>8</sub> = 7</p>
<p><br></p>
<h2 id="程式碼"><a href="#程式碼" class="headerlink" title="程式碼"></a>程式碼</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vector&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	Solution() : length(MAX_SIZE + <span class="number">1</span>, <span class="number">0</span>)</span><br><span class="line">	&#123;</span><br><span class="line">		ios::sync_with_stdio(<span class="literal">false</span>);</span><br><span class="line">		<span class="built_in">cin</span>.tie(<span class="literal">nullptr</span>);</span><br><span class="line">		<span class="built_in">cout</span>.tie(<span class="literal">nullptr</span>);</span><br><span class="line"></span><br><span class="line">		buffer.reserve(<span class="number">1000</span>);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">int</span> <span class="title">calculate</span><span class="params">(<span class="keyword">int</span> n)</span></span></span><br><span class="line"><span class="function">	</span>&#123;</span><br><span class="line">		<span class="keyword">int</span> len = <span class="number">0</span>;</span><br><span class="line">		<span class="keyword">int</span> k;</span><br><span class="line"></span><br><span class="line">		buffer.clear();</span><br><span class="line"></span><br><span class="line">		<span class="keyword">for</span> (k = n; k != <span class="number">1</span>; ++len)</span><br><span class="line">		&#123;</span><br><span class="line">			<span class="comment">// 如果遇到記錄過的點，恭喜你，剩下的部分就可以不用計算了</span></span><br><span class="line">			<span class="keyword">if</span> (k &lt;= MAX_SIZE &amp;&amp; length[k] != <span class="number">0</span>)</span><br><span class="line">			&#123;</span><br><span class="line">				len = len + length[k] - <span class="number">1</span>;</span><br><span class="line">				<span class="keyword">break</span>;</span><br><span class="line">			&#125;</span><br><span class="line"></span><br><span class="line">			<span class="keyword">if</span> (k &amp; <span class="number">0x01</span>)</span><br><span class="line">				k = <span class="number">3</span> * k + <span class="number">1</span>;</span><br><span class="line">			<span class="keyword">else</span></span><br><span class="line">				k &gt;&gt;= <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">			<span class="comment">// 將過程中經過的點記錄下來</span></span><br><span class="line">			buffer.push_back(k);</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">		length[n] = ++len;</span><br><span class="line"></span><br><span class="line">		<span class="keyword">for</span> (k = <span class="number">0</span>; k &lt; buffer.size(); ++k)</span><br><span class="line">			<span class="keyword">if</span> (buffer[k] &lt;= MAX_SIZE)</span><br><span class="line">				length[buffer[k]] = len - k - <span class="number">1</span>;</span><br><span class="line">		</span><br><span class="line">		<span class="keyword">return</span> len;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">	<span class="keyword">const</span> <span class="keyword">int</span> MAX_SIZE = <span class="number">1000000</span>;</span><br><span class="line">	<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; length;</span><br><span class="line">	<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; buffer;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">void</span>)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	Solution s;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">int</span> l, r;</span><br><span class="line">	<span class="keyword">int</span> max;</span><br><span class="line">	<span class="keyword">int</span> tem;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">int</span> sm, b;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">while</span> (<span class="built_in">cin</span> &gt;&gt; l)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="built_in">cin</span> &gt;&gt; r;</span><br><span class="line"></span><br><span class="line">		max = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">		<span class="comment">// 確保 sm 是小的， b 是大的</span></span><br><span class="line">		<span class="keyword">if</span> (l &gt; r)</span><br><span class="line">		&#123;</span><br><span class="line">			sm = r;</span><br><span class="line">			b = l;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">else</span></span><br><span class="line">		&#123;</span><br><span class="line">			sm = l;</span><br><span class="line">			b = r;</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">		<span class="keyword">for</span> (<span class="keyword">auto</span> k = sm; k &lt;= b; ++k)</span><br><span class="line">		&#123;</span><br><span class="line">			<span class="comment">// 得到 "每一個" 數字的序列長度</span></span><br><span class="line">			tem = s.calculate(k);</span><br><span class="line"></span><br><span class="line">			<span class="comment">// 記錄最大的</span></span><br><span class="line">			<span class="keyword">if</span> (tem &gt; max)</span><br><span class="line">				max = tem;</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">		<span class="built_in">cout</span> &lt;&lt; l &lt;&lt; <span class="string">" "</span> &lt;&lt; r &lt;&lt; <span class="string">" "</span> &lt;&lt; max &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://nicknick0630.github.io/2019/02/21/UVa-674-Coin-Change/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Chen Yu Sheng">
      <meta itemprop="description" content="紀錄我的程式學習">
      <meta itemprop="image" content="/upload/image/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Coding Road">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2019/02/21/UVa-674-Coin-Change/" class="post-title-link" itemprop="url">UVa 674 : Coin Change</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              

              
                
              

              <time title="Created: 2019-02-21 00:37:59" itemprop="dateCreated datePublished" datetime="2019-02-21T00:37:59+08:00">2019-02-21</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Edited on</span>
                
                <time title="Modified: 2019-03-03 00:17:21" itemprop="dateModified" datetime="2019-03-03T00:17:21+08:00">2019-03-03</time>
              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/UVa/" itemprop="url" rel="index"><span itemprop="name">UVa</span></a></span>

                
                
              
            </span>
          

          
            
            
              
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
            
                <span class="post-meta-item-text">Comments: </span>
                <a href="/2019/02/21/UVa-674-Coin-Change/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2019/02/21/UVa-674-Coin-Change/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="題目-UVa-Link"><a href="#題目-UVa-Link" class="headerlink" title="題目 :  UVa Link "></a>題目 : <a href="https://uva.onlinejudge.org/index.php?option=com_onlinejudge&amp;Itemid=8&amp;page=show_problem&amp;problem=615" target="_blank" rel="noopener"> <small><b>UVa Link</b></small> </a></h2><p>給定面額為 1, 5, 10, 25, 50 的 5 種硬幣，輸入一個金額大小，要計算出使用這 5 種硬幣組合出此金額的方法數，並輸出。</p>
<p><strong>測資</strong><br><strong>Input : </strong></p>
<blockquote>
<p>11<br>26</p>
</blockquote>
<p><strong>Output : </strong></p>
<blockquote>
<p>4<br>13</p>
</blockquote>
<p><br></p>
<h2 id="解法"><a href="#解法" class="headerlink" title="解法"></a>解法</h2><p>這是典型的完全背包問題，和 01 背包問題不同的地方是硬幣是可以無限使用的，而 01 背包問題只能使用一次。</p>
<p><b> 01 背包問題思考角度 </b> : 考慮第 k 種物品，取或不取</p>
<blockquote>
<p>狀態轉移方程 :  <code>value[k][w] = max{ value[k-1][w] (不取k), value[k-1][w - weight[k]] + item_val[k] (取k) }</code><br><small> value[k][w] : value[k][w]為取前 k 種硬幣與重量限制為 w 的情況下的最大價值</small><br><small> weight[k]   : 物品 k 的重量 </small><br><small> item_val[k] : 物品 k 的價值 </small></p>
</blockquote>
<p><b> 而完全背包問題則否，所以需要換一個角度思考</b><br>當計算到 <code>t</code> cents 時，因為每一個硬幣都是可以無限拿取的，因此我們可以考慮 2 種計算方法</p>
<ol>
<li>令 <code>t + coin_type[k]</code> 的方法數增加一種，因為可以從 <code>t</code> 再加上 <code>coin_type[k]</code></li>
<li>令 <code>t</code> 的方法數增加一種，因為可以從 <code>t - coin_type[k]</code> 再加上 <code>coin_type[k]</code></li>
</ol>
<p>如果忽略檢測陣列範圍值所消耗的時間的話，這 2 種方法的時間複雜度皆為 O(N<sup>2</sup>)<br>但這 2 種方法的本質我覺得還是不太一樣的</p>
<ul>
<li>方法一比較屬於暴力法，從當前進度點出發去建構更深的答案。( 有點抽象發散的 fu )<br>此外，當我們的問題範圍最大只到 t 時，這種方法會做出多餘的事情。<br>例如有 1, 5, 10 三種硬幣，我們要計算 11 的答案，但當我們在計算 10 時，多計算了 10+5 與 10+10。</li>
<li>方法二就是屬於動態規劃，從子問題去建構出最佳解答。( 聚合的 fu )<br>並且不會有多餘的計算。</li>
</ul>
<p><br></p>
<h2 id="程式碼"><a href="#程式碼" class="headerlink" title="程式碼"></a>程式碼</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vector&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	Solution() : coin_types&#123; <span class="number">1</span>,<span class="number">5</span>,<span class="number">10</span>,<span class="number">25</span>,<span class="number">50</span> &#125;, methods(MAX_CENTS + <span class="number">1</span>, <span class="number">0</span>)</span><br><span class="line">	&#123;</span><br><span class="line">		ios::sync_with_stdio(<span class="literal">false</span>);</span><br><span class="line">		<span class="built_in">cin</span>.tie(<span class="literal">nullptr</span>);</span><br><span class="line">		<span class="built_in">cout</span>.tie(<span class="literal">nullptr</span>);</span><br><span class="line"></span><br><span class="line">		initial_methods();</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">int</span> <span class="title">calculate</span><span class="params">(<span class="keyword">int</span> num)</span> <span class="keyword">const</span></span></span><br><span class="line"><span class="function">	</span>&#123;</span><br><span class="line">		<span class="keyword">return</span> methods[num];</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">	<span class="keyword">const</span> <span class="keyword">int</span> MAX_CENTS = <span class="number">7489</span>;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">const</span> <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; coin_types;</span><br><span class="line">	<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; methods;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">void</span> <span class="title">initial_methods</span><span class="params">(<span class="keyword">void</span>)</span></span></span><br><span class="line"><span class="function">	</span>&#123;</span><br><span class="line">		<span class="comment">// note this!!!!</span></span><br><span class="line">		methods[<span class="number">0</span>] = <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">		<span class="keyword">for</span> (<span class="keyword">auto</span> coin : coin_types)</span><br><span class="line">			<span class="keyword">for</span> (<span class="keyword">int</span> now_value = coin; now_value &lt;= MAX_CENTS; ++now_value)</span><br><span class="line">				methods[now_value] += methods[now_value - coin];</span><br><span class="line">	&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">void</span>)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	Solution s;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">int</span> num;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">while</span> (<span class="built_in">cin</span> &gt;&gt; num)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="built_in">cout</span> &lt;&lt; s.calculate(num) &lt;&lt; <span class="string">'\n'</span>;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="built_in">cout</span> &lt;&lt; flush;</span><br><span class="line">	</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://nicknick0630.github.io/2019/02/18/Heap-and-Priority-Queue/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Chen Yu Sheng">
      <meta itemprop="description" content="紀錄我的程式學習">
      <meta itemprop="image" content="/upload/image/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Coding Road">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2019/02/18/Heap-and-Priority-Queue/" class="post-title-link" itemprop="url">Heap and Priority Queue</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              

              
                
              

              <time title="Created: 2019-02-18 22:39:29" itemprop="dateCreated datePublished" datetime="2019-02-18T22:39:29+08:00">2019-02-18</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Edited on</span>
                
                <time title="Modified: 2019-02-20 23:20:27" itemprop="dateModified" datetime="2019-02-20T23:20:27+08:00">2019-02-20</time>
              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/演算法-Algorithm/" itemprop="url" rel="index"><span itemprop="name">演算法 ( Algorithm )</span></a></span>

                
                
              
            </span>
          

          
            
            
              
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
            
                <span class="post-meta-item-text">Comments: </span>
                <a href="/2019/02/18/Heap-and-Priority-Queue/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2019/02/18/Heap-and-Priority-Queue/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="Heap"><a href="#Heap" class="headerlink" title="Heap"></a>Heap</h1><p>Heap 是一種 Data Structure ，要符合 <strong>Heap Condition (or Heap Property)</strong><br>Heap property 是指 parent 和 children 的關係 (但 children 之間順序無關)</p>
<ol>
<li>Min Heap : parent &lt;= children</li>
<li>Max Heap : parent &gt;= children</li>
</ol>
<p>Heap 有一些不同的實作方法，如果只有寫<font color="blue"> <em>Heap</em></font>，通常都是指 <strong>Binary Heap</strong><br>其他種類如: Binomial Heap ， Fibonacci Heap ， Pairing Heap 等，參考 <a href="https://s.yam.com/x4pre" target="_blank" rel="noopener"><font size="5">wiki Heap</font></a></p>
<p><br></p>
<h2 id="nbsp-Binary-Heap"><a href="#nbsp-Binary-Heap" class="headerlink" title="&nbsp;(Binary) Heap"></a>&nbsp;(Binary) Heap</h2><p>Heap 是一種 Binary Tree，不過要符合2個條件 :</p>
<ol>
<li>外觀是 Complete Binary Tree</li>
<li>裡面元素都要符合 Heap Condition</li>
</ol>
<p>雖然 Heap 在觀念上是一個 Complete Binary Tree ，但實際上是用 array 去 implement<br>這樣就能快速地去存取父(子)節點</p>
<blockquote>
<p>node 的 index 是 i</p>
<ol>
<li>parent  : i / 2</li>
<li>left child : i * 2</li>
<li>right child : i * 2 + 1</li>
</ol>
</blockquote>
<p>Heap 的 push 為 O(log<sub>2</sub> N)，pop 為 O(log<sub>2</sub> N)</p>
<p><br></p>
<h1 id="Priority-Queue"><a href="#Priority-Queue" class="headerlink" title="Priority Queue"></a>Priority Queue</h1><p>Priority Queue 是一種 Abstract Data Structure，也是一種 container<br>當要從 Priority Queue 取出一個元素時，他會回傳<strong>最高優先度</strong>的元素並移除它<br>並可以 change 某元素之優先度，當然其位置也會改變</p>
<p><br></p>
<p>可以使用不同的 Data Structure 去 implement<br>舉一些例子 : [ search 表示搜尋時間 ，已知位置為 O(1)，否則為該 search 欄位時間 ]</p>
<p><br></p>
<table>
<thead>
<tr>
<th style="text-align:left"></th>
<th style="text-align:left">insert</th>
<th style="text-align:left">remove</th>
<th style="text-align:left">change</th>
<th style="text-align:left">isEmpty</th>
<th style="text-align:left">search</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">unsorted array</td>
<td style="text-align:left">O(1)</td>
<td style="text-align:left">O(n)</td>
<td style="text-align:left">srch+O(1)</td>
<td style="text-align:left">O(1)</td>
<td style="text-align:left">O(n)</td>
</tr>
<tr>
<td style="text-align:left">sorted array</td>
<td style="text-align:left">O(n)</td>
<td style="text-align:left">O(n)</td>
<td style="text-align:left">O(n)</td>
<td style="text-align:left">O(1)</td>
<td style="text-align:left">O(log<sub>2</sub> n)</td>
</tr>
<tr>
<td style="text-align:left">circular sorted array</td>
<td style="text-align:left">O(n)</td>
<td style="text-align:left">O(1)</td>
<td style="text-align:left">O(n)</td>
<td style="text-align:left">O(1)</td>
<td style="text-align:left">O(log<sub>2</sub> n)</td>
</tr>
<tr>
<td style="text-align:left">unsorted linked list</td>
<td style="text-align:left">O(1)</td>
<td style="text-align:left">O(n)</td>
<td style="text-align:left">srch+O(1)</td>
<td style="text-align:left">O(1)</td>
<td style="text-align:left">O(n)</td>
</tr>
<tr>
<td style="text-align:left">sorted linked list</td>
<td style="text-align:left">O(n)</td>
<td style="text-align:left">O(1)</td>
<td style="text-align:left">O(n)</td>
<td style="text-align:left">O(1)</td>
<td style="text-align:left">O(n)</td>
</tr>
<tr>
<td style="text-align:left">Binary Heap</td>
<td style="text-align:left">O(log<sub>2</sub> n)</td>
<td style="text-align:left">O(log<sub>2</sub> n)</td>
<td style="text-align:left">O(log<sub>2</sub> n)</td>
<td style="text-align:left">O(1)</td>
<td style="text-align:left">O(log<sub>2</sub> n)</td>
</tr>
</tbody>
</table>
<p><br></p>
<p>其中 Binary Heap 所花費的時間較為平均，O(1) &lt; O(log<sub>2</sub> n) &lt; O(n)<br>當然還有更快的作法，指示使用 Binary Tree 較為常見<br>有時也會稱 Priority Queue 為 Heap</p>
<p><br></p>
<h1 id="快速建立-Binary-Heap-或-PQ"><a href="#快速建立-Binary-Heap-或-PQ" class="headerlink" title="快速建立 Binary Heap 或 PQ"></a>快速建立 Binary Heap 或 PQ</h1><p>假設要建立 Min Heap<br>給定一個隨機數值的 array ，將所有有 child 的 node (也就是subtree) 做 bulidMinHeap<br>直到所有subtree皆完成，就建立完成了<br><br></p>
<p><img src="./Heap.png" width="350" height="350"></p>
<p>例如給定一個有 10 個 node 的 tree ，最後一個有 child 的 node 為 10/2 = 5<br>因此從 index=5 開始做 MinHeap<br>5 -&gt; 4 -&gt; 3 -&gt; 2 -&gt; 1<br>就完成了<br>費時 :</p>
<ul>
<li>level 3 -&gt; 耗時 1 (向下比較1次) * 2 個 = 2</li>
<li>level 2 -&gt; 耗時 2 (向下比較2次) * 2 個 = 4</li>
<li>level 1 -&gt; 耗時 3 (向下比較3次) * 1 個 = 3</li>
<li>total = 9</li>
</ul>
<font style="font-size:1.3em; font-weight:900;">Genneral ( 廣義來說 ) : 共有 N 個元素 <br> </font>

<p>共有 log<sub>2</sub>N+1 = k 層 (假設為 Full Binary Tree)<br>( M<sub>i</sub> : 第 i 層有 <font size="4">$ \frac{N}{2^{k-i}} $</font> 個元素 )</p>
<ul>
<li>level k-1 -&gt; 耗時 :  $ 1 \times M $<sub>k-1</sub> = $ 1 \times \frac{N}{2^1} $</li>
<li>level k-2 -&gt; 耗時 :  $ 2 \times M $<sub>k-2</sub> = $ 2 \times \frac{N}{2^2} $</li>
<li>level k-3 -&gt; 耗時 :  $ 3 \times M $<sub>k-3</sub> = $ 3 \times \frac{N}{2^3} $<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;。<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;。<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;。</li>
<li>level 1   -&gt; 耗時 :  $ (k-1) \times M $<sub>1</sub> = $ (k-1) \times \frac{N}{2^{k-1}} $</li>
</ul>
<p>Total time = $ \sum\limits_{i=1}^{k-1}i \times \frac{N}{2^{k-i}} = \frac{N}{2} + \frac{2N}{4} + \frac{3N}{8} + \frac{4N}{16} …$</p>
<p><strong>耗時 = O(N)</strong></p>
<p><br></p>
<h1 id="Binary-Heap-實作"><a href="#Binary-Heap-實作" class="headerlink" title="Binary Heap 實作"></a>Binary Heap 實作</h1><p>首先設一個依據 Heap property 比較大小的 function</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Min Heap</span></span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">compare_with_heap_property</span><span class="params">(<span class="keyword">int</span> a, <span class="keyword">int</span> b)</span> <span class="keyword">const</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> arr[a] &lt; arr[b];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Max Heap</span></span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">compare_with_heap_property</span><span class="params">(<span class="keyword">int</span> a, <span class="keyword">int</span> b)</span> <span class="keyword">const</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> arr[a] &gt; arr[b];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><br><br>然後在寫 heap_down(向下比較) 與 heap_up(向上比較)</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">heap_down</span><span class="params">(<span class="keyword">int</span> up)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> down = up * <span class="number">2</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">while</span> (down &lt;= nowSize)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span> (down != nowSize &amp;&amp; compare_with_heap_property(down + <span class="number">1</span>, down))</span><br><span class="line">            ++down;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (compare_with_heap_property(down, up))</span><br><span class="line">        &#123;</span><br><span class="line">            swap(down, up);</span><br><span class="line">            up = down;</span><br><span class="line">            down *= <span class="number">2</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">heap_up</span><span class="params">(<span class="keyword">int</span> down)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> up = down / <span class="number">2</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">while</span> (up &gt;= <span class="number">1</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span> (compare_with_heap_property(down, up))</span><br><span class="line">        &#123;</span><br><span class="line">            swap(down, up);</span><br><span class="line">            down = up;</span><br><span class="line">            up /= <span class="number">2</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><br><br>接下來就可以去實作 <strong>快速建立Heap</strong> 、<strong>push(insert)</strong> 、<strong>pop(delete)</strong></p>
<h2 id="nbsp-快速建立Heap"><a href="#nbsp-快速建立Heap" class="headerlink" title="&nbsp;快速建立Heap"></a>&nbsp;快速建立Heap</h2><p>利用上方 <strong>#3</strong> 介紹的概念</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">build</span><span class="params">(<span class="keyword">void</span>)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> up = nowSize / <span class="number">2</span>; up &gt;= <span class="number">1</span>; --up)</span><br><span class="line">        heap_down(up);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="nbsp-nbsp-push-insert"><a href="#nbsp-nbsp-push-insert" class="headerlink" title="&nbsp;&nbsp;push(insert)"></a>&nbsp;&nbsp;push(insert)</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">push</span><span class="params">(<span class="keyword">const</span> T &amp;input, <span class="keyword">const</span> <span class="keyword">int</span> key = <span class="number">0</span>)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (nowSize == capacity)    <span class="comment">// capacity is full</span></span><br><span class="line">        extend_capacity();</span><br><span class="line"></span><br><span class="line">    arr[++nowSize].setData(input);</span><br><span class="line">    arr[nowSize].setKey(key);</span><br><span class="line"></span><br><span class="line">    heap_up(nowSize);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="nbsp-nbsp-pop-delete"><a href="#nbsp-nbsp-pop-delete" class="headerlink" title="&nbsp;&nbsp;pop(delete)"></a>&nbsp;&nbsp;pop(delete)</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">pop</span><span class="params">(<span class="keyword">void</span>)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (empty())</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">cerr</span> &lt;&lt; <span class="string">"no element"</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    arr[<span class="number">1</span>] = arr[nowSize--];</span><br><span class="line"></span><br><span class="line">    heap_down(<span class="number">1</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><br></p>
<hr>
<p>參考網站</p>
<ul>
<li><a href="https://www.cyut.edu.tw/~ckhung/b/al/heap.php" target="_blank" rel="noopener">朝陽</a></li>
<li><a href="http://alrightchiu.github.io/SecondRound/priority-queuebinary-heap.html" target="_blank" rel="noopener">Second Round</a></li>
<li><a href="https://rockmanray.tian.yam.com/posts/44952434" target="_blank" rel="noopener">PriorityQueue各種實作</a></li>
<li><a href="https://en.wikipedia.org/wiki/Heap_(data_structure" target="_blank" rel="noopener">wiki heap</a>)</li>
<li><a href="https://en.wikipedia.org/wiki/Priority_queue" target="_blank" rel="noopener">wiki PQ</a></li>
</ul>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  
  <nav class="pagination">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="extend next" rel="next" href="/page/2/"><i class="fa fa-angle-right" aria-label="Next page"></i></a>
  </nav>



          </div>
          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      

      <div class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image" src="/upload/image/avatar.gif" alt="Chen Yu Sheng">
            
              <p class="site-author-name" itemprop="name">Chen Yu Sheng</p>
              <div class="site-description motion-element" itemprop="description">紀錄我的程式學習</div>
          </div>

          
            <nav class="site-state motion-element">
              
                <div class="site-state-item site-state-posts">
                
                  <a href="/archives/">
                
                    <span class="site-state-item-count">11</span>
                    <span class="site-state-item-name">posts</span>
                  </a>
                </div>
              

              
                
                
                <div class="site-state-item site-state-categories">
                  
                    
                      <a href="/categories/">
                    
                  
                    
                    
                      
                    
                      
                    
                    <span class="site-state-item-count">2</span>
                    <span class="site-state-item-name">categories</span>
                  </a>
                </div>
              

              
                
                
                <div class="site-state-item site-state-tags">
                  
                    
                      <a href="/tags/">
                    
                  
                    
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                    <span class="site-state-item-count">9</span>
                    <span class="site-state-item-name">tags</span>
                  </a>
                </div>
              
            </nav>
          

          

          
            <div class="links-of-author motion-element">
              
                <span class="links-of-author-item">
                  
                  
                    
                  
                  
                    
                  
                  <a href="https://github.com/nicknick0630" title="GitHub &rarr; https://github.com/nicknick0630" rel="noopener" target="_blank"><i class="fa fa-fw fa-github"></i>GitHub</a>
                </span>
              
                <span class="links-of-author-item">
                  
                  
                    
                  
                  
                    
                  
                  <a href="mailto:nicknick0630@gmail.com" title="E-Mail &rarr; mailto:nicknick0630@gmail.com" rel="noopener" target="_blank"><i class="fa fa-fw fa-envelope"></i>E-Mail</a>
                </span>
              
            </div>
          

          

          
          

          
            
          
          

        </div>
      </div>

      

      

    </div>
  </aside>
  


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2019</span>
  <span class="with-love" id="animate">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Chen Yu Sheng</span>

  

  
</div>


  <div class="powered-by">Powered by <a href="https://hexo.io" class="theme-link" rel="noopener" target="_blank">Hexo</a> v3.8.0</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">Theme – <a href="https://theme-next.org" class="theme-link" rel="noopener" target="_blank">NexT.Gemini</a></div>




        
<div class="busuanzi-count">
  <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>

  
    <span class="post-meta-item-icon">
      <i class="fa fa-user"></i>
    </span>
    <span class="site-uv" title="Total Visitors">
      <span class="busuanzi-value" id="busuanzi_value_site_uv"></span>
    </span>
  

  
    <span class="post-meta-divider">|</span>
  

  
    <span class="post-meta-item-icon">
      <i class="fa fa-eye"></i>
    </span>
    <span class="site-pv" title="Total Views">
      <span class="busuanzi-value" id="busuanzi_value_site_pv"></span>
    </span>
  
</div>









        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
          <span id="scrollpercent"><span>0</span>%</span>
        
      </div>
    

    

    

    
  </div>

  

<script>
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>














  
    
    
  
  <script color="0,0,255" opacity="0.5" zindex="-1" count="99" src="/lib/canvas-nest/canvas-nest-nomobile.min.js"></script>













  
  <script src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>


  


  <script src="/js/src/utils.js?v=7.0.1"></script>

  <script src="/js/src/motion.js?v=7.0.1"></script>



  
  


  <script src="/js/src/affix.js?v=7.0.1"></script>

  <script src="/js/src/schemes/pisces.js?v=7.0.1"></script>




  

  


  <script src="/js/src/next-boot.js?v=7.0.1"></script>


  

  

  

  
  
  <script id="dsq-count-scr" src="https://conding-road.disqus.com/count.js" async></script>







  




  

  

  
  

  
  
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
  

  


  

  

  

  

  

  

  

  

  
<style>
  .copy-btn {
    display: inline-block;
    padding: 6px 12px;
    font-size: 13px;
    font-weight: 700;
    line-height: 20px;
    color: #333;
    white-space: nowrap;
    vertical-align: middle;
    cursor: pointer;
    
      background-color: #eee;
      background-image: linear-gradient(#fcfcfc, #eee);
      border: 1px solid #d5d5d5;
      border-radius: 3px;
    
    user-select: none;
    outline: 0;
  }

  .highlight-wrap .copy-btn {
    transition: opacity .3s ease-in-out;
    opacity: 0;
    padding: 2px 6px;
    position: absolute;
    
      right: 4px;
      top: 8px;
    
  }

  .highlight-wrap:hover .copy-btn,
  .highlight-wrap .copy-btn:focus {
    opacity: 1;
  }

  .highlight-wrap {
    position: relative;
  }
</style>
<script>
  $('.highlight').each(function(i, e) {
    var $wrap = $('<div>').addClass('highlight-wrap');
    $(e).after($wrap);
    $wrap.append($('<button>').addClass('copy-btn').append('Copy').on('click', function(e) {
      var code = $(this).parent().find('.code').find('.line').map(function(i, e) {
        return $(e).text();
      }).toArray().join('\n');
      var ta = document.createElement('textarea');
      var yPosition = window.pageYOffset || document.documentElement.scrollTop;
      ta.style.top = yPosition + 'px'; // Prevent page scroll
      ta.style.position = 'absolute';
      ta.style.opacity = '0';
      ta.readOnly = true;
      ta.value = code;
      document.body.appendChild(ta);
      ta.select();
      ta.setSelectionRange(0, code.length);
      ta.readOnly = false;
      var result = document.execCommand('copy');
      
        if (result) $(this).text('Copied');
        else $(this).text('Copy failed');
      
      ta.blur(); // For iOS
      $(this).blur();
    })).on('mouseleave', function(e) {
      var $b = $(this).find('.copy-btn');
      setTimeout(function() {
        $b.text('Copy');
      }, 300);
    }).append(e);
  })
</script>


</body>
</html>
